<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Serene Writes - AI Writing Assistant untuk Mahasiswa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-blue: #64b5f6;
            --secondary-blue: #90caf9;
            --accent-blue: #42a5f5;
            --light-blue: #e3f2fd;
            --white: #ffffff;
            --text-light: #ffffff;
            --text-dark: #1a237e;
            --app-primary-blue: #1e88e5;
            --app-secondary-blue: #42a5f5;
            --light-bg: #f8f9fa;
            --serenid-primary: #1a365d;
            --serenid-secondary: #2c5282;
        }
        
        /* GLOBAL STYLES */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .hidden {
            display: none !important;
        }
        
        .toast-container {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 9999;
        }
        
        /* LANDING PAGE STYLES */
        .landing-page {
            color: var(--text-dark);
            background-color: var(--primary-blue);
        }
        
        /* Batik Mega Mendung Pattern */
        .mega-mendung-bg {
            background-color: var(--primary-blue);
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(255,255,255,0.25) 3%, transparent 25%),
                radial-gradient(circle at 80% 80%, rgba(255,255,255,0.25) 3%, transparent 25%),
                radial-gradient(circle at 50% 50%, rgba(255,255,255,0.2) 5%, transparent 35%),
                radial-gradient(circle at 10% 90%, rgba(255,255,255,0.15) 2%, transparent 20%),
                radial-gradient(circle at 90% 10%, rgba(255,255,255,0.15) 2%, transparent 20%),
                radial-gradient(circle at 40% 70%, rgba(255,255,255,0.2) 3%, transparent 30%),
                radial-gradient(circle at 70% 40%, rgba(255,255,255,0.2) 3%, transparent 30%);
            background-size: 180px 180px, 220px 220px, 200px 200px, 150px 150px, 150px 150px, 170px 170px, 170px 170px;
            position: relative;
            overflow: hidden;
        }
        
        .mega-mendung-bg::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(45deg, transparent 68%, rgba(255,255,255,0.15) 68%, rgba(255,255,255,0.15) 72%, transparent 72%),
                linear-gradient(-45deg, transparent 68%, rgba(255,255,255,0.15) 68%, rgba(255,255,255,0.15) 72%, transparent 72%),
                linear-gradient(135deg, transparent 68%, rgba(255,255,255,0.15) 68%, rgba(255,255,255,0.15) 72%, transparent 72%),
                linear-gradient(-135deg, transparent 68%, rgba(255,255,255,0.15) 68%, rgba(255,255,255,0.15) 72%, transparent 72%),
                linear-gradient(90deg, transparent 75%, rgba(255,255,255,0.1) 75%, rgba(255,255,255,0.1) 80%, transparent 80%),
                linear-gradient(0deg, transparent 75%, rgba(255,255,255,0.1) 75%, rgba(255,255,255,0.1) 80%, transparent 80%);
            background-size: 70px 70px;
            opacity: 0.8;
        }
        
        /* Landing Page Navbar */
        .landing-navbar {
            background-color: rgba(100, 181, 246, 0.85);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            transition: all 0.3s;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .landing-navbar-brand {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--text-dark) !important;
        }
        
        .landing-navbar-nav .nav-link {
            color: rgba(26, 35, 126, 0.9) !important;
            font-weight: 600;
            margin: 0 0.5rem;
            transition: all 0.3s;
        }
        
        .landing-navbar-nav .nav-link:hover {
            color: var(--text-dark) !important;
            transform: translateY(-2px);
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
        }
        
        /* Landing Page Hero Section */
        .hero-section {
            min-height: 90vh;
            display: flex;
            align-items: center;
            padding: 5rem 0;
            position: relative;
        }
        
        .hero-content {
            position: relative;
            z-index: 10;
        }
        
        .hero-title {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            color: var(--text-dark);
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.5);
        }
        
        .hero-subtitle {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            color: var(--text-dark);
            opacity: 0.9;
            max-width: 600px;
            font-weight: 500;
        }
        
        .hero-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: 50px;
            padding: 0.5rem 1.5rem;
            font-weight: 600;
            margin-bottom: 2rem;
            color: var(--text-dark);
            font-weight: 700;
        }
        
        /* Landing Page Feature Section */
        .feature-section {
            padding: 5rem 0;
            background-color: rgba(144, 202, 249, 0.85);
            position: relative;
        }
        
        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-align: center;
            color: var(--text-dark);
        }
        
        .section-subtitle {
            font-size: 1.1rem;
            text-align: center;
            margin-bottom: 3rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            color: var(--text-dark);
            opacity: 0.9;
            font-weight: 500;
        }
        
        .landing-feature-card {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            height: 100%;
            transition: all 0.3s;
            border: 2px solid rgba(255, 255, 255, 0.3);
            margin-bottom: 2rem;
        }
        
        .landing-feature-card:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            color: var(--text-dark);
            margin-bottom: 1.5rem;
            display: inline-block;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.4);
        }
        
        .feature-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-dark);
        }
        
        .feature-description {
            color: var(--text-dark);
            opacity: 0.9;
            margin-bottom: 1.5rem;
            font-weight: 500;
        }
        
        /* CTA Section */
        .cta-section {
            padding: 5rem 0;
            background-color: rgba(66, 165, 245, 0.9);
            position: relative;
            text-align: center;
        }
        
        .cta-content {
            max-width: 900px;
            margin: 0 auto;
            padding: 3rem;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .cta-content::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 30% 30%, rgba(255,255,255,0.15) 2%, transparent 20%),
                radial-gradient(circle at 70% 70%, rgba(255,255,255,0.15) 2%, transparent 20%),
                radial-gradient(circle at 50% 50%, rgba(255,255,255,0.1) 3%, transparent 25%);
            background-size: 120px 120px;
            opacity: 0.6;
            animation: float 20s infinite linear;
        }
        
        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-100px, -100px) rotate(360deg); }
        }
        
        .cta-title {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            color: var(--text-dark);
            position: relative;
            z-index: 2;
        }
        
        .cta-text {
            font-size: 1.2rem;
            margin-bottom: 2.5rem;
            color: var(--text-dark);
            opacity: 0.9;
            font-weight: 500;
            position: relative;
            z-index: 2;
            line-height: 1.8;
        }
        
        .cta-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-bottom: 2.5rem;
            position: relative;
            z-index: 2;
            flex-wrap: wrap;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--text-dark);
            display: block;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            font-size: 1rem;
            color: var(--text-dark);
            opacity: 0.9;
            font-weight: 600;
        }
        
        .cta-buttons {
            position: relative;
            z-index: 2;
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }
        
        /* Landing Page Footer */
        .landing-footer {
            background-color: rgba(79, 170, 240, 0.9);
            padding: 3rem 0;
            border-top: 2px solid rgba(255, 255, 255, 0.3);
            color: var(--text-dark);
        }
        
        /* Batik Pattern Divider */
        .batik-divider {
            height: 100px;
            position: relative;
            overflow: hidden;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255,255,255,0.2) 10%, 
                rgba(255,255,255,0.4) 20%, 
                rgba(255,255,255,0.2) 30%,
                transparent 40%,
                rgba(255,255,255,0.2) 50%,
                rgba(255,255,255,0.4) 60%,
                rgba(255,255,255,0.2) 70%,
                transparent 80%,
                rgba(255,255,255,0.2) 90%,
                transparent 100%
            );
            background-size: 200% 100%;
            animation: wave 10s linear infinite;
        }
        
        @keyframes wave {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* APP STYLES */
        .app-page {
            color: var(--text-dark);
            background-color: var(--light-bg);
        }
        
        .app-header {
            background: linear-gradient(135deg, var(--app-primary-blue), var(--app-secondary-blue));
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .sidebar {
            background-color: white;
            min-height: calc(100vh - 70px);
            box-shadow: 2px 0 5px rgba(0,0,0,0.05);
            padding: 1.5rem 0;
        }
        
        .sidebar .nav-link {
            color: var(--text-dark);
            padding: 0.8rem 1.5rem;
            border-left: 3px solid transparent;
            transition: all 0.3s;
            margin-bottom: 5px;
        }
        
        .sidebar .nav-link:hover,
        .sidebar .nav-link.active {
            background-color: rgba(30, 136, 229, 0.1);
            border-left-color: var(--app-primary-blue);
            color: var(--app-primary-blue);
        }
        
        .main-content {
            padding: 2rem;
            background-color: var(--light-bg);
            min-height: calc(100vh - 70px);
        }
        
        .feature-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 1.5rem;
            border-left: 4px solid var(--app-primary-blue);
        }
        
        .btn-primary {
            background-color: var(--app-primary-blue);
            border-color: var(--app-primary-blue);
            padding: 0.5rem 1.5rem;
        }
        
        .btn-primary:hover {
            background-color: #1976d2;
            border-color: #1976d2;
            transform: translateY(-1px);
        }
        
        .auth-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--app-primary-blue), var(--app-secondary-blue));
        }
        
        .auth-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 2.5rem;
            max-width: 450px;
            width: 100%;
        }
        
        .logo-text {
            font-size: 2rem;
            font-weight: bold;
            color: var(--app-primary-blue);
            margin-bottom: 0.5rem;
        }
        
        textarea {
            min-height: 200px;
            resize: vertical;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            transition: border-color 0.3s;
        }
        
        textarea:focus {
            border-color: var(--app-primary-blue);
            box-shadow: 0 0 0 0.2rem rgba(30, 136, 229, 0.25);
            outline: none;
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--app-primary-blue), var(--app-secondary-blue));
            color: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            text-align: center;
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .note-item {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border-left: 3px solid var(--app-primary-blue);
            transition: all 0.3s;
        }
        
        .note-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .progress {
            height: 20px;
            border-radius: 10px;
        }
        
        .progress-bar {
            background-color: var(--app-primary-blue);
            border-radius: 10px;
        }
        
        .page-content {
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-content {
            border-radius: 10px;
            border: none;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .modal-header {
            background-color: var(--app-primary-blue);
            color: white;
            border-radius: 10px 10px 0 0;
        }
        
        .form-control:focus {
            border-color: var(--app-primary-blue);
            box-shadow: 0 0 0 0.2rem rgba(30, 136, 229, 0.25);
        }
        
        .form-select:focus {
            border-color: var(--app-primary-blue);
            box-shadow: 0 0 0 0.2rem rgba(30, 136, 229, 0.25);
        }
        
        /* Landing Page Button Styles */
        .btn-landing-primary {
            background-color: var(--text-dark);
            border-color: var(--text-dark);
            padding: 0.8rem 2rem;
            font-weight: 600;
            border-radius: 50px;
            transition: all 0.3s;
            color: var(--white);
        }
        
        .btn-landing-primary:hover {
            background-color: #283593;
            border-color: #283593;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            color: var(--white);
        }
        
        .btn-outline-landing {
            padding: 0.8rem 2rem;
            font-weight: 600;
            border-radius: 50px;
            transition: all 0.3s;
            background-color: rgba(255, 255, 255, 0.2);
            border: 2px solid var(--text-dark);
            color: var(--text-dark);
        }
        
        .btn-outline-landing:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            color: var(--text-dark);
        }
        
        /* SerenId Feature Styles - Renamed to Idea Generator */
        .idea-generator-card {
            border-left: 4px solid var(--serenid-primary) !important;
        }
        
        .idea-generator-badge {
            background-color: var(--serenid-primary);
            color: white;
        }
        
        .btn-idea-generator {
            background-color: var(--serenid-primary);
            border-color: var(--serenid-primary);
            color: white;
        }
        
        .btn-idea-generator:hover {
            background-color: var(--serenid-secondary);
            border-color: var(--serenid-secondary);
            color: white;
        }
        
        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 0.8s ease-out;
        }
        
        /* History System Styles */
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #dee2e6;
        }
        
        .history-item {
            padding: 0.75rem;
            border-bottom: 1px solid #f1f1f1;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .history-item:hover {
            background-color: #f8f9fa;
            transform: translateX(5px);
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .history-date {
            font-size: 0.75rem;
            color: #6c757d;
        }
        
        .history-content {
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .history-type {
            display: inline-block;
            padding: 0.15rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-right: 0.5rem;
        }
        
        .history-type-editor { background-color: #e3f2fd; color: var(--app-primary-blue); }
        .history-type-paraphrase { background-color: #e8f5e9; color: #2e7d32; }
        .history-type-plagiarism { background-color: #fff3e0; color: #f57c00; }
        .history-type-summarizer { background-color: #f3e5f5; color: #7b1fa2; }
        .history-type-idea { background-color: #e8eaf6; color: var(--serenid-primary); }
        .history-type-note { background-color: #f5f5f5; color: #424242; }
        
        .history-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        
        .history-btn {
            padding: 0.1rem 0.5rem;
            font-size: 0.75rem;
        }
        
        .empty-history {
            text-align: center;
            padding: 2rem;
            color: #6c757d;
        }
        
        .history-filter {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .history-filter-btn {
            padding: 0.25rem 0.75rem;
            font-size: 0.75rem;
            border-radius: 15px;
        }
        
        /* Responsive Styles */
        @media (max-width: 768px) {
            .sidebar {
                min-height: auto;
                padding: 1rem 0;
            }
            
            .main-content {
                padding: 1rem;
            }
            
            .stat-card {
                margin-bottom: 1rem;
            }
            
            .hero-title {
                font-size: 2.5rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .landing-feature-card {
                padding: 1.5rem;
            }
            
            .cta-content {
                padding: 2rem 1.5rem;
            }
            
            .cta-title {
                font-size: 2.2rem;
            }
            
            .cta-stats {
                gap: 1.5rem;
            }
            
            .stat-number {
                font-size: 2rem;
            }
            
            .history-filter {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Toast Notifications -->
    <div class="toast-container"></div>

    <!-- LANDING PAGE -->
    <div id="landingPage" class="landing-page mega-mendung-bg">
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-dark landing-navbar fixed-top">
            <div class="container">
                <a class="navbar-brand landing-navbar-brand" href="#">
                    <i class="fas fa-pen-fancy me-2"></i>Serene Writes
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto landing-navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="#home">Beranda</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#features">Fitur</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#cta">Bergabung</a>
                        </li>
                        <li class="nav-item ms-2">
                            <a class="btn btn-landing-primary" href="#" id="goToLoginBtn">Login / Daftar</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <section id="home" class="hero-section">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-7 hero-content animate-fade-in-up">
                        <span class="hero-badge">
                            <i class="fas fa-robot me-2"></i>AI Writing Assistant
                        </span>
                        <h1 class="hero-title">Tingkatkan Produktivitas Menulis Akademik Anda</h1>
                        <p class="hero-subtitle">
                            Serene Writes adalah asisten menulis AI pertama di Indonesia yang dirancang khusus untuk mahasiswa. 
                            Dengan teknologi kecerdasan buatan, aplikasi ini membantu Anda menulis, menyunting, 
                            dan menganalisis tulisan akademik dengan lebih efisien.
                        </p>
                        <div class="d-flex flex-wrap gap-3">
                            <a href="#features" class="btn btn-landing-primary btn-lg">
                                <i class="fas fa-play-circle me-2"></i>Jelajahi Fitur
                            </a>
                            <a href="#" class="btn btn-outline-landing btn-lg" id="startFreeBtn">
                                <i class="fas fa-rocket me-2"></i>Mulai Gratis
                            </a>
                        </div>
                        <div class="mt-5">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="d-flex align-items-center">
                                        <div class="me-3">
                                            <i class="fas fa-check-circle fa-2x" style="color: var(--text-dark);"></i>
                                        </div>
                                        <div>
                                            <h5 class="mb-0" style="color: var(--text-dark);">100% Gratis</h5>
                                            <small style="color: var(--text-dark); opacity: 0.8;">Untuk mahasiswa Indonesia</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="d-flex align-items-center">
                                        <div class="me-3">
                                            <i class="fas fa-shield-alt fa-2x" style="color: var(--text-dark);"></i>
                                        </div>
                                        <div>
                                            <h5 class="mb-0" style="color: var(--text-dark);">Aman & Privasi</h5>
                                            <small style="color: var(--text-dark); opacity: 0.8;">Data Anda terlindungi</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="d-flex align-items-center">
                                        <div class="me-3">
                                            <i class="fas fa-bolt fa-2x" style="color: var(--text-dark);"></i>
                                        </div>
                                        <div>
                                            <h5 class="mb-0" style="color: var(--text-dark);">Cepat & Efisien</h5>
                                            <small style="color: var(--text-dark); opacity: 0.8;">Hemat waktu menulis</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-5">
                        <div class="position-relative">
                            <!-- Batik ornament -->
                            <div class="position-absolute top-0 start-0" style="width: 100px; height: 100px; opacity: 0.3;">
                                <div class="position-absolute" style="width: 100%; height: 100%; border: 3px solid var(--text-dark); border-radius: 50%;"></div>
                                <div class="position-absolute" style="top: 25%; left: 25%; width: 50%; height: 50%; border: 2px solid var(--text-dark); border-radius: 50%;"></div>
                            </div>
                            
                            <!-- Feature preview illustration -->
                            <div class="bg-white rounded-3 p-4 shadow-lg" style="opacity: 0.95; border: 2px solid rgba(26, 35, 126, 0.2);">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="rounded-circle p-2 me-3" style="background-color: var(--text-dark); color: white;">
                                        <i class="fas fa-edit"></i>
                                    </div>
                                    <div>
                                        <h5 class="mb-0" style="color: var(--text-dark);">Editor AI Cerdas</h5>
                                        <small class="text-muted">Memperbaiki tulisan secara otomatis</small>
                                    </div>
                                </div>
                                <div class="border rounded p-3 mb-3" style="background-color: #f8f9fa;">
                                    <p class="mb-2 text-muted"><small>Teks asli:</small></p>
                                    <p class="mb-0 small">"penelitian ini menunjukan bahwa ada hubungan signifikan antara..."</p>
                                </div>
                                <div class="border rounded p-3" style="background-color: #e8f5e9;">
                                    <p class="mb-2" style="color: var(--text-dark);"><small><i class="fas fa-magic me-1"></i>Hasil perbaikan AI:</small></p>
                                    <p class="mb-0 small fw-medium">"Penelitian ini menunjukkan bahwa terdapat hubungan signifikan antara..."</p>
                                </div>
                                <div class="mt-3 d-flex justify-content-between">
                                    <span class="badge" style="background-color: var(--text-dark);">Kapitalisasi</span>
                                    <span class="badge" style="background-color: var(--accent-blue);">Ejaan</span>
                                    <span class="badge" style="background-color: var(--primary-blue);">Tanda Baca</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Batik Divider -->
        <div class="batik-divider"></div>

        <!-- Features Section -->
        <section id="features" class="feature-section">
            <div class="container">
                <div class="text-center mb-5 animate-fade-in-up">
                    <h2 class="section-title">Fitur Utama Serene Writes</h2>
                    <p class="section-subtitle">
                        Dengan teknologi AI mutakhir, Serene Writes membantu Anda dalam setiap tahap penulisan akademik.
                    </p>
                </div>
                
                <div class="row">
                    <!-- Feature 1 -->
                    <div class="col-lg-4 col-md-6 animate-fade-in-up" style="animation-delay: 0.1s;">
                        <div class="landing-feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-edit"></i>
                            </div>
                            <h3 class="feature-title">Editor AI Cerdas</h3>
                            <p class="feature-description">
                                Perbaiki ejaan, tata bahasa, dan struktur tulisan secara otomatis dengan teknologi AI.
                                Editor kami memahami konteks akademik dan memberikan saran perbaikan yang tepat.
                            </p>
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Koreksi ejaan otomatis</li>
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Perbaikan tata bahasa</li>
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Saran perbaikan gaya tulisan</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Feature 2 -->
                    <div class="col-lg-4 col-md-6 animate-fade-in-up" style="animation-delay: 0.2s;">
                        <div class="landing-feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-sync-alt"></i>
                            </div>
                            <h3 class="feature-title">Parafrase Akademik</h3>
                            <p class="feature-description">
                                Ubah kalimat tanpa mengubah makna asli. Alat parafrase kami membantu menghindari plagiarisme 
                                sekaligus meningkatkan kualitas tulisan Anda.
                            </p>
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Pemahaman konteks akademik</li>
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Penggantian sinonim tepat</li>
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Restrukturisasi kalimat</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Feature 3 -->
                    <div class="col-lg-4 col-md-6 animate-fade-in-up" style="animation-delay: 0.3s;">
                        <div class="landing-feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <h3 class="feature-title">Deteksi Plagiarisme</h3>
                            <p class="feature-description">
                                Cek tingkat kemiripan tulisan Anda dengan sumber online. Sistem kami memberikan laporan 
                                detail dan saran untuk menghindari plagiarisme.
                            </p>
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Pemeriksaan database ekstensif</li>
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Laporan persentase kemiripan</li>
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Saran perbaikan spesifik</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Feature 4 -->
                    <div class="col-lg-4 col-md-6 animate-fade-in-up" style="animation-delay: 0.4s;">
                        <div class="landing-feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-compress-alt"></i>
                            </div>
                            <h3 class="feature-title">Peringkas Otomatis</h3>
                            <p class="feature-description">
                                Rangkum teks panjang menjadi poin-poin penting. Alat ini ideal untuk meringkas jurnal, 
                                buku, atau bahan penelitian Anda.
                            </p>
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Ekstraksi ide utama</li>
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Penyesuaian panjang ringkasan</li>
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Mempertahankan makna asli</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Feature 5 -->
                    <div class="col-lg-4 col-md-6 animate-fade-in-up" style="animation-delay: 0.5s;">
                        <div class="landing-feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-sticky-note"></i>
                            </div>
                            <h3 class="feature-title">Manajemen Catatan</h3>
                            <p class="feature-description">
                                Simpan, atur, dan kelola catatan penelitian Anda. Sistem terintegrasi memudahkan Anda 
                                mengakses catatan kapan saja.
                            </p>
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Penyimpanan cloud</li>
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Pencarian cepat</li>
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Kategorisasi otomatis</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Feature 6 - GENERATOR IDE (REMOVED SEREN ID TEXT) -->
                    <div class="col-lg-4 col-md-6 animate-fade-in-up" style="animation-delay: 0.6s;">
                        <div class="landing-feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                            <h3 class="feature-title">Generator Ide</h3>
                            <p class="feature-description">
                                Ekstrak kata kunci, buat ringkasan, dan hasilkan ide tulisan akademik dari teks yang Anda masukkan.
                            </p>
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Ekstraksi kata kunci otomatis</li>
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Generator ide kreatif</li>
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Analisis kekuatan ide</li>
                                <li class="mb-2"><i class="fas fa-check-circle me-2" style="color: var(--text-dark);"></i>Template kerangka tulisan</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Batik Divider -->
        <div class="batik-divider"></div>

        <!-- CTA SECTION -->
        <section id="cta" class="cta-section">
            <div class="container">
                <div class="cta-content animate-fade-in-up">
                    <h2 class="cta-title">Bergabunglah dengan Komunitas Penulis Akademik</h2>
                    <p class="cta-text">
                        Ribuan mahasiswa Indonesia telah mempercayakan proses penulisan mereka kepada Serene Writes. 
                        Nikmati kemudahan menulis dengan teknologi AI yang dirancang khusus untuk kebutuhan akademik, 
                        sambil melestarikan keindahan budaya Indonesia melalui desain batik Mega Mendung kami.
                    </p>
                    
                    <div class="cta-stats">
                        <div class="stat-item">
                            <span class="stat-number">10K+</span>
                            <span class="stat-label">Pengguna Aktif</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">50K+</span>
                            <span class="stat-label">Tugas Diselesaikan</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">99%</span>
                            <span class="stat-label">Kepuasan Pengguna</span>
                        </div>
                    </div>
                    
                    <div class="cta-buttons">
                        <a href="#" class="btn btn-landing-primary btn-lg" id="getStartedBtn">
                            <i class="fas fa-user-plus me-2"></i>Mulai Menulis Sekarang
                        </a>
                        <a href="#" class="btn btn-outline-landing btn-lg" id="learnMoreBtn">
                            <i class="fas fa-info-circle me-2"></i>Pelajari Lebih Lanjut
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="landing-footer">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 mb-4">
                        <h4 class="mb-4">
                            <i class="fas fa-pen-fancy me-2"></i>Serene Writes
                        </h4>
                        <p style="color: var(--text-dark);">
                            Asisten menulis AI pertama di Indonesia yang dirancang khusus 
                            untuk kebutuhan akademik mahasiswa.
                        </p>
                        <div class="d-flex gap-3 mt-4">
                            <a href="#" class="fs-5" style="color: var(--text-dark);"><i class="fab fa-twitter"></i></a>
                            <a href="#" class="fs-5" style="color: var(--text-dark);"><i class="fab fa-instagram"></i></a>
                            <a href="#" class="fs-5" style="color: var(--text-dark);"><i class="fab fa-linkedin"></i></a>
                            <a href="#" class="fs-5" style="color: var(--text-dark);"><i class="fab fa-youtube"></i></a>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-6 mb-4">
                        <h5 class="mb-4" style="color: var(--text-dark);">Fitur</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2"><a href="#" class="text-decoration-none" style="color: var(--text-dark); opacity: 0.9;">Editor AI</a></li>
                            <li class="mb-2"><a href="#" class="text-decoration-none" style="color: var(--text-dark); opacity: 0.9;">Parafrase</a></li>
                            <li class="mb-2"><a href="#" class="text-decoration-none" style="color: var(--text-dark); opacity: 0.9;">Cek Plagiarisme</a></li>
                            <li class="mb-2"><a href="#" class="text-decoration-none" style="color: var(--text-dark); opacity: 0.9;">Peringkas</a></li>
                            <li class="mb-2"><a href="#" class="text-decoration-none" style="color: var(--text-dark); opacity: 0.9;">Generator Ide</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-2 col-md-6 mb-4">
                        <h5 class="mb-4" style="color: var(--text-dark);">Perusahaan</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2"><a href="#" class="text-decoration-none" style="color: var(--text-dark); opacity: 0.9;">Tentang Kami</a></li>
                            <li class="mb-2"><a href="#" class="text-decoration-none" style="color: var(--text-dark); opacity: 0.9;">Blog</a></li>
                            <li class="mb-2"><a href="#" class="text-decoration-none" style="color: var(--text-dark); opacity: 0.9;">Karir</a></li>
                            <li class="mb-2"><a href="#" class="text-decoration-none" style="color: var(--text-dark); opacity: 0.9;">Kontak</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-4 mb-4">
                        <h5 class="mb-4" style="color: var(--text-dark);">Tetap Terhubung</h5>
                        <p class="mb-3" style="color: var(--text-dark); opacity: 0.9;">Berlangganan newsletter untuk mendapatkan tips menulis dan update fitur.</p>
                        <div class="input-group">
                            <input type="email" class="form-control" placeholder="Email Anda" style="border: 2px solid rgba(26, 35, 126, 0.3);">
                            <button class="btn btn-landing-primary" type="button">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        <p class="small mt-3" style="color: var(--text-dark); opacity: 0.8;">
                            <i class="fas fa-map-marker-alt me-2"></i>Jakarta, Indonesia
                        </p>
                    </div>
                </div>
                <hr class="my-4" style="border-color: rgba(26, 35, 126, 0.3);">
                <div class="row">
                    <div class="col-md-6">
                        <p class="mb-0" style="color: var(--text-dark);">&copy; 2023 Serene Writes. Hak cipta dilindungi.</p>
                        <small style="color: var(--text-dark); opacity: 0.8;">Dilengkapi dengan fitur Generator Ide</small>
                    </div>
                    <div class="col-md-6 text-md-end">
                        <a href="#" class="text-decoration-none me-3" style="color: var(--text-dark); opacity: 0.9;">Kebijakan Privasi</a>
                        <a href="#" class="text-decoration-none" style="color: var(--text-dark); opacity: 0.9;">Syarat Layanan</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- AUTHENTICATION PAGES -->
    <!-- Login Page -->
    <div id="loginPage" class="auth-container hidden">
        <div class="auth-card">
            <div class="text-center mb-4">
                <div class="logo-text">Serene Writes</div>
                <p class="text-muted">AI Writing Assistant untuk Mahasiswa</p>
            </div>
            <form id="loginForm">
                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" id="loginEmail" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-control" id="loginPassword" required>
                </div>
                <div class="mb-3 form-check">
                    <input type="checkbox" class="form-check-input" id="rememberMe">
                    <label class="form-check-label" for="rememberMe">Remember Me</label>
                </div>
                <button type="submit" class="btn btn-primary w-100 mb-3">Login</button>
                <div class="text-center">
                    <a href="#" id="showForgotPassword" class="text-muted small">Lupa Password?</a>
                </div>
                <hr>
                <div class="text-center">
                    <span class="text-muted">Belum punya akun?</span>
                    <a href="#" id="showRegister" class="text-primary">Daftar</a>
                </div>
                <div class="text-center mt-3">
                    <a href="#" id="backToLanding" class="text-primary">
                        <i class="fas fa-arrow-left me-1"></i>Kembali ke Beranda
                    </a>
                </div>
            </form>
        </div>
    </div>

    <!-- Register Page -->
    <div id="registerPage" class="auth-container hidden">
        <div class="auth-card">
            <div class="text-center mb-4">
                <div class="logo-text">Serene Writes</div>
                <p class="text-muted">Daftar Akun Baru</p>
            </div>
            <form id="registerForm">
                <div class="mb-3">
                    <label class="form-label">Nama Lengkap</label>
                    <input type="text" class="form-control" id="registerName" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" id="registerEmail" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-control" id="registerPassword" required minlength="6">
                    <small class="text-muted">Minimal 6 karakter</small>
                </div>
                <div class="mb-3">
                    <label class="form-label">Konfirmasi Password</label>
                    <input type="password" class="form-control" id="registerConfirmPassword" required>
                </div>
                <button type="submit" class="btn btn-primary w-100 mb-3">Daftar</button>
                <div class="text-center">
                    <span class="text-muted">Sudah punya akun?</span>
                    <a href="#" id="showLogin" class="text-primary">Login</a>
                </div>
                <div class="text-center mt-3">
                    <a href="#" id="backToLandingFromRegister" class="text-primary">
                        <i class="fas fa-arrow-left me-1"></i>Kembali ke Beranda
                    </a>
                </div>
            </form>
        </div>
    </div>

    <!-- Forgot Password Page -->
    <div id="forgotPasswordPage" class="auth-container hidden">
        <div class="auth-card">
            <div class="text-center mb-4">
                <div class="logo-text">Serene Writes</div>
                <p class="text-muted">Reset Password</p>
            </div>
            <form id="forgotPasswordForm">
                <div class="mb-3">
                    <label class="form-label">Email Terdaftar</label>
                    <input type="email" class="form-control" id="forgotEmail" required>
                </div>
                <button type="submit" class="btn btn-primary w-100 mb-3">Kirim Link Reset</button>
                <div class="text-center">
                    <a href="#" id="backToLogin" class="text-primary">Kembali ke Login</a>
                </div>
                <div class="text-center mt-3">
                    <a href="#" id="backToLandingFromForgot" class="text-primary">
                        <i class="fas fa-arrow-left me-1"></i>Kembali ke Beranda
                    </a>
                </div>
            </form>
        </div>
    </div>

    <!-- MAIN APPLICATION -->
    <div id="mainApp" class="hidden app-page">
        <!-- Header -->
        <header class="app-header">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <h3 class="mb-0"><i class="fas fa-pen-fancy"></i> Serene Writes</h3>
                        <small class="text-white-50">AI Writing Assistant</small>
                    </div>
                    <div class="col-md-6 text-end">
                        <span class="me-3" id="userNameDisplay"></span>
                        <button class="btn btn-light btn-sm" id="editProfileBtn">
                            <i class="fas fa-user-edit"></i> Edit Profil
                        </button>
                        <button class="btn btn-outline-light btn-sm" id="backToLandingFromApp">
                            <i class="fas fa-home"></i> Beranda
                        </button>
                        <button class="btn btn-outline-light btn-sm" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="container-fluid">
            <div class="row">
                <!-- Sidebar Navigation -->
                <nav class="col-md-2 sidebar">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#" data-page="dashboard">
                                <i class="fas fa-home"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-page="editor">
                                <i class="fas fa-edit"></i> Editor AI
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-page="paraphrase">
                                <i class="fas fa-sync-alt"></i> Parafrase
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-page="plagiarism">
                                <i class="fas fa-shield-alt"></i> Cek Plagiarisme
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-page="summarizer">
                                <i class="fas fa-compress-alt"></i> Summarizer
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-page="generatoride">
                                <i class="fas fa-lightbulb"></i> Generator Ide
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-page="notes">
                                <i class="fas fa-sticky-note"></i> Catatan Saya
                            </a>
                        </li>
                    </ul>
                </nav>

                <!-- Main Content Area -->
                <main class="col-md-10 main-content">
                    <!-- Dashboard Page -->
                    <div id="dashboardPage" class="page-content">
                        <h2 class="mb-4">Dashboard</h2>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="stat-card">
                                    <h5>Total Catatan</h5>
                                    <h2 id="totalNotes">0</h2>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-card">
                                    <h5>Total Kata</h5>
                                    <h2 id="totalWords">0</h2>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-card">
                                    <h5>Parafrase</h5>
                                    <h2 id="totalParaphrase">0</h2>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-card">
                                    <h5>Ringkasan</h5>
                                    <h2 id="totalSummaries">0</h2>
                                </div>
                            </div>
                        </div>
                        <div class="feature-card mt-4" id="dashboardContent">
                            <!-- Content will be loaded by JavaScript -->
                        </div>
                    </div>

                    <!-- Editor AI Page -->
                    <div id="editorPage" class="page-content hidden">
                        <h2 class="mb-4">Editor AI</h2>
                        <div class="feature-card">
                            <div class="mb-3">
                                <label class="form-label">Masukkan Teks</label>
                                <textarea class="form-control" id="editorInput" 
                                          rows="10" placeholder="Ketik atau tempel teks Anda di sini..."></textarea>
                            </div>
                            <div class="d-flex gap-2 mb-3 flex-wrap">
                                <button class="btn btn-primary" id="autoEditBtn">
                                    <i class="fas fa-magic"></i> Edit Otomatis
                                </button>
                                <button class="btn btn-success" id="saveEditorBtn">
                                    <i class="fas fa-save"></i> Simpan ke Catatan
                                </button>
                                <button class="btn btn-outline-secondary" id="clearEditorBtn">
                                    <i class="fas fa-trash"></i> Hapus
                                </button>
                            </div>
                            <div class="mt-4" id="editorResult"></div>
                        </div>
                    </div>

                    <!-- Paraphrase Page -->
                    <div id="paraphrasePage" class="page-content hidden">
                        <h2 class="mb-4">Parafrase Teks</h2>
                        <div class="feature-card">
                            <div class="mb-3">
                                <label class="form-label">Teks Asli</label>
                                <textarea class="form-control" id="paraphraseInput" 
                                          rows="8" placeholder="Masukkan teks yang ingin diparafrasekan..."></textarea>
                            </div>
                            <button class="btn btn-primary" id="paraphraseBtn">
                                <i class="fas fa-sync-alt"></i> Parafrase
                            </button>
                            <div class="mt-4" id="paraphraseResult"></div>
                        </div>
                    </div>

                    <!-- Plagiarism Check Page -->
                    <div id="plagiarismPage" class="page-content hidden">
                        <h2 class="mb-4">Cek Plagiarisme</h2>
                        <div class="feature-card">
                            <div class="mb-3">
                                <label class="form-label">Teks untuk Dicek</label>
                                <textarea class="form-control" id="plagiarismInput" 
                                          rows="8" placeholder="Masukkan teks untuk dicek plagiarisme..."></textarea>
                            </div>
                            <button class="btn btn-primary" id="checkPlagiarismBtn">
                                <i class="fas fa-shield-alt"></i> Cek Plagiarisme
                            </button>
                            <div class="mt-4" id="plagiarismResult"></div>
                        </div>
                    </div>

                    <!-- Summarizer Page -->
                    <div id="summarizerPage" class="page-content hidden">
                        <h2 class="mb-4">Summarizer</h2>
                        <div class="feature-card">
                            <div class="mb-3">
                                <label class="form-label">Teks Panjang</label>
                                <textarea class="form-control" id="summarizerInput" 
                                          rows="10" placeholder="Masukkan teks panjang untuk dirangkum..."></textarea>
                            </div>
                            <button class="btn btn-primary" id="summarizeBtn">
                                <i class="fas fa-compress-alt"></i> Rangkum
                            </button>
                            <div class="mt-4" id="summarizerResult"></div>
                        </div>
                    </div>

                    <!-- Generator Ide Page - REMOVED SEREN ID TEXT -->
                    <div id="generatoridePage" class="page-content hidden">
                        <h2 class="mb-4">Generator Ide</h2>
                        <div class="feature-card idea-generator-card">
                            <div class="row">
                                <div class="col-lg-6 mb-4">
                                    <h5 class="mb-3">Input Teks</h5>
                                    <p class="text-muted small mb-3">Masukkan teks artikel, materi kuliah, atau jurnal yang ingin Anda olah</p>
                                    <textarea id="generatorideTextInput" class="form-control" rows="12" placeholder="Ketik atau tempel teks di sini..."></textarea>
                                    <div class="d-flex justify-content-between mt-3">
                                        <button class="btn btn-outline-secondary btn-sm" id="generatorideClearText">Hapus Teks</button>
                                        <button class="btn btn-idea-generator btn-sm" id="generatorideProcessText">Proses Teks</button>
                                    </div>
                                </div>
                                
                                <div class="col-lg-6 mb-4">
                                    <h5 class="mb-3">Hasil Analisis</h5>
                                    
                                    <!-- Keywords -->
                                    <div class="mb-4">
                                        <h6>Kata Kunci</h6>
                                        <div id="generatorideKeywordsContainer" class="mb-3">
                                            <p class="text-muted small">Kata kunci akan muncul di sini setelah teks diproses</p>
                                        </div>
                                    </div>
                                    
                                    <!-- Text Summary -->
                                    <div class="mb-4">
                                        <h6>Ringkasan Teks</h6>
                                        <div id="generatorideSummaryContainer">
                                            <p class="text-muted small">Ringkasan akan muncul di sini setelah teks diproses</p>
                                        </div>
                                    </div>
                                    
                                    <!-- Idea Generator -->
                                    <div class="mb-4">
                                        <h6>Generator Ide</h6>
                                        <div id="generatorideIdeaContainer">
                                            <p class="text-muted small">Ide akan muncul di sini setelah teks diproses</p>
                                        </div>
                                        
                                        <!-- Idea Direction -->
                                        <div class="mt-3">
                                            <label class="form-label">Arah Ide:</label>
                                            <div class="btn-group w-100" role="group">
                                                <input type="radio" class="btn-check" name="generatoride-idea-direction" id="generatoride-descriptive" autocomplete="off" checked>
                                                <label class="btn btn-outline-idea-generator" for="generatoride-descriptive">Deskriptif</label>
                                                
                                                <input type="radio" class="btn-check" name="generatoride-idea-direction" id="generatoride-analytical" autocomplete="off">
                                                <label class="btn btn-outline-idea-generator" for="generatoride-analytical">Analitis</label>
                                                
                                                <input type="radio" class="btn-check" name="generatoride-idea-direction" id="generatoride-solution" autocomplete="off">
                                                <label class="btn btn-outline-idea-generator" for="generatoride-solution">Solutif</label>
                                            </div>
                                        </div>
                                        
                                        <!-- Auto Title -->
                                        <div class="mt-3">
                                            <label class="form-label">Judul Otomatis:</label>
                                            <div id="generatorideTitleContainer">
                                                <p class="text-muted small">Judul akan muncul di sini</p>
                                            </div>
                                        </div>
                                        
                                        <!-- Idea Strength Meter -->
                                        <div class="mt-3">
                                            <label class="form-label">Kekuatan Ide:</label>
                                            <div class="strength-meter mb-2">
                                                <div id="generatorideStrengthFill" class="strength-fill" style="width: 0%"></div>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <small id="generatorideStrengthText">Belum diukur</small>
                                                <small id="generatorideStrengthScore">0/100</small>
                                            </div>
                                            <div id="generatorideStrengthFeedback" class="mt-2">
                                                <p class="text-muted small">Masukkan teks untuk mengevaluasi kekuatan ide</p>
                                            </div>
                                        </div>
                                        
                                        <!-- Save Idea Button -->
                                        <div class="mt-4">
                                            <button class="btn btn-idea-generator w-100" id="generatorideSaveIdea">Simpan Ide</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Template Outline -->
                            <div class="row mt-4">
                                <div class="col-12">
                                    <h5 class="mb-3">Template Kerangka Tulisan</h5>
                                    <div id="generatorideOutlineContainer">
                                        <p class="text-muted small">Template kerangka akan muncul di sini setelah ide disimpan</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- History Section -->
                        <div class="feature-card idea-generator-card mt-4">
                            <h5 class="mb-3">Riwayat Ide Tersimpan</h5>
                            <div id="generatorideHistoryContainer">
                                <p class="text-muted text-center py-4">Belum ada ide yang disimpan. Proses teks untuk menyimpan ide pertama Anda.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Notes Page -->
                    <div id="notesPage" class="page-content hidden">
                        <h2 class="mb-4">Catatan Saya</h2>
                        <div class="feature-card">
                            <button class="btn btn-primary mb-3" id="addNoteBtn">
                                <i class="fas fa-plus"></i> Tambah Catatan
                            </button>
                            <div id="notesList"></div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal fade" id="editProfileModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Profil</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form id="editProfileForm">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label class="form-label">Nama Lengkap</label>
                            <input type="text" class="form-control" id="editName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="editEmail" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password Baru (kosongkan jika tidak ingin mengubah)</label>
                            <input type="password" class="form-control" id="editPassword" minlength="6">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                        <button type="submit" class="btn btn-primary">Simpan</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Note Modal -->
    <div class="modal fade" id="addNoteModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Tambah Catatan</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form id="addNoteForm">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label class="form-label">Judul</label>
                            <input type="text" class="form-control" id="noteTitle" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Konten</label>
                            <textarea class="form-control" id="noteContent" rows="10" required></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                        <button type="submit" class="btn btn-primary">Simpan</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // ==================== HISTORY SYSTEM ====================
        class HistorySystem {
            constructor(userId) {
                this.userId = userId;
                this.storageKey = `serene_history_${userId}`;
                this.history = JSON.parse(localStorage.getItem(this.storageKey) || '[]');
            }

            save() {
                localStorage.setItem(this.storageKey, JSON.stringify(this.history));
            }

            addHistoryItem(type, content, result, metadata = {}) {
                const item = {
                    id: Date.now(),
                    userId: this.userId,
                    type: type,
                    content: content.substring(0, 200),
                    result: result.substring(0, 200),
                    metadata: metadata,
                    timestamp: new Date().toISOString(),
                    date: new Date().toLocaleDateString('id-ID', {
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    })
                };

                this.history.unshift(item);
                
                if (this.history.length > 50) {
                    this.history = this.history.slice(0, 50);
                }

                this.save();
                this.updateAllHistoryDisplays();
                return item;
            }

            getHistoryByType(type) {
                if (type === 'all') {
                    return this.history;
                }
                return this.history.filter(item => item.type === type);
            }

            clearHistoryByType(type) {
                if (type === 'all') {
                    this.history = [];
                } else {
                    this.history = this.history.filter(item => item.type !== type);
                }
                this.save();
                this.updateAllHistoryDisplays();
            }

            getHistoryItem(id) {
                return this.history.find(item => item.id === id);
            }

            updateAllHistoryDisplays() {
                this.updateDashboardHistory();
                this.updateEditorHistory();
                this.updateParaphraseHistory();
                this.updatePlagiarismHistory();
                this.updateSummarizerHistory();
                this.updateIdeaHistory();
                this.updateNotesHistory();
            }

            updateDashboardHistory() {
                const container = document.getElementById('dashboardHistoryList');
                if (!container) return;

                const allHistory = this.getHistoryByType('all');
                this.renderHistoryList(container, allHistory.slice(0, 10));
            }

            updateEditorHistory() {
                const container = document.getElementById('editorHistoryList');
                if (!container) return;

                const editorHistory = this.getHistoryByType('editor');
                this.renderHistoryList(container, editorHistory.slice(0, 10), 'editor');
            }

            updateParaphraseHistory() {
                const container = document.getElementById('paraphraseHistoryList');
                if (!container) return;

                const paraphraseHistory = this.getHistoryByType('paraphrase');
                this.renderHistoryList(container, paraphraseHistory.slice(0, 10), 'paraphrase');
            }

            updatePlagiarismHistory() {
                const container = document.getElementById('plagiarismHistoryList');
                if (!container) return;

                const plagiarismHistory = this.getHistoryByType('plagiarism');
                this.renderHistoryList(container, plagiarismHistory.slice(0, 10), 'plagiarism');
            }

            updateSummarizerHistory() {
                const container = document.getElementById('summarizerHistoryList');
                if (!container) return;

                const summarizerHistory = this.getHistoryByType('summarizer');
                this.renderHistoryList(container, summarizerHistory.slice(0, 10), 'summarizer');
            }

            updateIdeaHistory() {
                const container = document.getElementById('ideaHistoryList');
                if (!container) return;

                const ideaHistory = this.getHistoryByType('idea');
                this.renderHistoryList(container, ideaHistory.slice(0, 10), 'idea');
            }

            updateNotesHistory() {
                const container = document.getElementById('notesHistoryList');
                if (!container) return;

                const notesHistory = this.getHistoryByType('note');
                this.renderHistoryList(container, notesHistory.slice(0, 10), 'note');
            }

            renderHistoryList(container, items, type = null) {
                if (!items || items.length === 0) {
                    container.innerHTML = `
                        <div class="empty-history">
                            <i class="fas fa-clock fa-2x mb-3"></i>
                            <p>Belum ada riwayat</p>
                        </div>
                    `;
                    return;
                }

                let html = '';
                items.forEach(item => {
                    const typeClass = `history-type-${item.type}`;
                    const typeLabel = this.getTypeLabel(item.type);
                    
                    html += `
                        <div class="history-item" data-id="${item.id}">
                            <div class="d-flex justify-content-between align-items-start">
                                <span class="history-type ${typeClass}">${typeLabel}</span>
                                <span class="history-date">${item.date}</span>
                            </div>
                            <div class="history-content" title="${this.escapeHtml(item.content)}">
                                <strong>Input:</strong> ${this.escapeHtml(item.content)}
                            </div>
                            ${item.result ? `
                            <div class="history-content" title="${this.escapeHtml(item.result)}">
                                <strong>Hasil:</strong> ${this.escapeHtml(item.result)}
                            </div>
                            ` : ''}
                            ${item.metadata ? this.renderMetadata(item.metadata) : ''}
                            <div class="history-actions">
                                <button class="btn btn-sm btn-outline-primary history-btn" onclick="loadHistoryItem(${item.id})">
                                    <i class="fas fa-redo"></i> Muat Ulang
                                </button>
                                <button class="btn btn-sm btn-outline-danger history-btn" onclick="deleteHistoryItem(${item.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `;
                });

                container.innerHTML = html;
            }

            renderMetadata(metadata) {
                let html = '';
                if (metadata.score) {
                    html += `<div class="history-content"><strong>Skor:</strong> ${metadata.score}</div>`;
                }
                if (metadata.uniqueness) {
                    html += `<div class="history-content"><strong>Keunikan:</strong> ${metadata.uniqueness}%</div>`;
                }
                if (metadata.reduction) {
                    html += `<div class="history-content"><strong>Pengurangan:</strong> ${metadata.reduction}%</div>`;
                }
                if (metadata.strength) {
                    html += `<div class="history-content"><strong>Kekuatan Ide:</strong> ${metadata.strength}/100</div>`;
                }
                if (metadata.keywords && Array.isArray(metadata.keywords)) {
                    const keywordsStr = metadata.keywords.join(', ');
                    html += `<div class="history-content" title="${keywordsStr}"><strong>Kata Kunci:</strong> ${keywordsStr.substring(0, 50)}${keywordsStr.length > 50 ? '...' : ''}</div>`;
                }
                return html;
            }

            getTypeLabel(type) {
                const labels = {
                    'editor': 'Editor AI',
                    'paraphrase': 'Parafrase',
                    'plagiarism': 'Cek Plagiarisme',
                    'summarizer': 'Summarizer',
                    'idea': 'Generator Ide',
                    'note': 'Catatan'
                };
                return labels[type] || type;
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        }

        // ==================== AUTHENTICATION SYSTEM ====================
        class AuthSystem {
            constructor() {
                this.users = JSON.parse(localStorage.getItem('serene_users') || '[]');
                this.currentUser = JSON.parse(localStorage.getItem('serene_current_user') || 'null');
            }

            hashPassword(password) {
                let hash = 0;
                for (let i = 0; i < password.length; i++) {
                    const char = password.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash;
                }
                return hash.toString();
            }

            register(name, email, password) {
                if (this.users.find(u => u.email === email)) {
                    return { success: false, message: 'Email sudah terdaftar!' };
                }
                const user = {
                    id: Date.now(),
                    name,
                    email,
                    password: this.hashPassword(password),
                    createdAt: new Date().toISOString(),
                    stats: {
                        paraphrase: 0,
                        summaries: 0,
                        notes: 0,
                        ideas: 0
                    }
                };
                this.users.push(user);
                localStorage.setItem('serene_users', JSON.stringify(this.users));
                return { success: true, message: 'Registrasi berhasil!' };
            }

            login(email, password, remember = false) {
                const user = this.users.find(u => u.email === email && u.password === this.hashPassword(password));
                if (!user) {
                    return { success: false, message: 'Email atau password salah!' };
                }
                this.currentUser = user;
                localStorage.setItem('serene_current_user', JSON.stringify(user));
                return { success: true, user };
            }

            logout() {
                this.currentUser = null;
                localStorage.removeItem('serene_current_user');
            }

            isLoggedIn() {
                return this.currentUser !== null;
            }

            updateProfile(name, email, password) {
                const userIndex = this.users.findIndex(u => u.id === this.currentUser.id);
                if (userIndex === -1) return { success: false, message: 'User tidak ditemukan!' };
                
                this.users[userIndex].name = name;
                this.users[userIndex].email = email;
                if (password) {
                    this.users[userIndex].password = this.hashPassword(password);
                }
                
                this.currentUser = this.users[userIndex];
                localStorage.setItem('serene_users', JSON.stringify(this.users));
                localStorage.setItem('serene_current_user', JSON.stringify(this.currentUser));
                return { success: true, message: 'Profil berhasil diupdate!' };
            }

            resetPassword(email) {
                const user = this.users.find(u => u.email === email);
                if (!user) {
                    return { success: false, message: 'Email tidak ditemukan!' };
                }
                return { success: true, message: 'Link reset password telah dikirim ke email Anda!' };
            }

            incrementStat(stat) {
                const userIndex = this.users.findIndex(u => u.id === this.currentUser.id);
                if (userIndex !== -1) {
                    if (!this.users[userIndex].stats) {
                        this.users[userIndex].stats = { paraphrase: 0, summaries: 0, notes: 0, ideas: 0 };
                    }
                    if (!this.users[userIndex].stats[stat]) {
                        this.users[userIndex].stats[stat] = 0;
                    }
                    this.users[userIndex].stats[stat]++;
                    this.currentUser = this.users[userIndex];
                    localStorage.setItem('serene_users', JSON.stringify(this.users));
                    localStorage.setItem('serene_current_user', JSON.stringify(this.currentUser));
                }
            }

            getStats() {
                return this.currentUser?.stats || { paraphrase: 0, summaries: 0, notes: 0, ideas: 0 };
            }
        }

        // ==================== APPLICATION DATA MANAGER ====================
        class AppData {
            constructor(userId) {
                this.userId = userId;
                this.storageKey = `serene_appData_${userId}`;
                this.data = JSON.parse(localStorage.getItem(this.storageKey) || '{"notes": [], "ideas": []}');
            }

            save() {
                localStorage.setItem(this.storageKey, JSON.stringify(this.data));
            }

            addNote(title, content) {
                const note = {
                    id: Date.now(),
                    title,
                    content,
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                this.data.notes.push(note);
                this.save();
                return note;
            }

            updateNote(id, title, content) {
                const note = this.data.notes.find(n => n.id === id);
                if (note) {
                    note.title = title;
                    note.content = content;
                    note.updatedAt = new Date().toISOString();
                    this.save();
                }
            }

            deleteNote(id) {
                this.data.notes = this.data.notes.filter(n => n.id !== id);
                this.save();
            }

            getNotes() {
                return this.data.notes || [];
            }

            addIdea(idea) {
                idea.id = Date.now();
                idea.userId = this.userId;
                idea.date = new Date().toISOString();
                this.data.ideas.push(idea);
                this.save();
                return idea;
            }

            deleteIdea(id) {
                this.data.ideas = this.data.ideas.filter(i => i.id !== id);
                this.save();
            }

            getIdeas() {
                return this.data.ideas || [];
            }

            getIdea(id) {
                return this.data.ideas.find(i => i.id === id);
            }
        }

        // ==================== UTILITY FUNCTIONS ====================
        function showToast(message, type = 'success') {
            const toastContainer = document.querySelector('.toast-container');
            const toast = document.createElement('div');
            toast.className = `toast align-items-center text-white bg-${type} border-0`;
            toast.setAttribute('role', 'alert');
            toast.innerHTML = `
                <div class="d-flex">
                    <div class="toast-body">${message}</div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                </div>
            `;
            toastContainer.appendChild(toast);
            const bsToast = new bootstrap.Toast(toast);
            bsToast.show();
            setTimeout(() => toast.remove(), 5000);
        }

        function showPage(pageId) {
            document.querySelectorAll('#landingPage, #loginPage, #registerPage, #forgotPasswordPage, #mainApp').forEach(el => {
                el.classList.add('hidden');
            });
            document.getElementById(pageId).classList.remove('hidden');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ==================== GLOBAL VARIABLES ====================
        const auth = new AuthSystem();
        let appData = null;
        let historySystem = null;

        // ==================== HISTORY CONTAINERS CREATION ====================
        function createHistoryContainers() {
            // Dashboard Page History
            const dashboardPage = document.getElementById('dashboardPage');
            if (dashboardPage && !document.getElementById('dashboardHistoryList')) {
                const historyHTML = `
                    <div class="feature-card mt-4">
                        <div class="history-header">
                            <h5 class="mb-0"><i class="fas fa-history me-2"></i>Riwayat Terbaru</h5>
                            <button class="btn btn-sm btn-outline-primary" onclick="clearAllHistory()">
                                <i class="fas fa-trash"></i> Hapus Semua
                            </button>
                        </div>
                        <div class="history-filter">
                            <button class="btn btn-sm history-filter-btn btn-primary active" data-filter="all">Semua</button>
                            <button class="btn btn-sm history-filter-btn btn-outline-primary" data-filter="editor">Editor</button>
                            <button class="btn btn-sm history-filter-btn btn-outline-success" data-filter="paraphrase">Parafrase</button>
                            <button class="btn btn-sm history-filter-btn btn-outline-warning" data-filter="plagiarism">Plagiarisme</button>
                            <button class="btn btn-sm history-filter-btn btn-outline-info" data-filter="summarizer">Summarizer</button>
                            <button class="btn btn-sm history-filter-btn btn-outline-dark" data-filter="idea">Ide</button>
                        </div>
                        <div id="dashboardHistoryList" style="max-height: 300px; overflow-y: auto;">
                            <div class="empty-history">
                                <i class="fas fa-clock fa-2x mb-3"></i>
                                <p>Belum ada riwayat aktivitas</p>
                            </div>
                        </div>
                    </div>
                `;
                
                const dashboardContent = document.getElementById('dashboardContent');
                if (dashboardContent) {
                    dashboardContent.insertAdjacentHTML('afterend', historyHTML);
                }
            }

            // Editor Page History
            const editorPage = document.getElementById('editorPage');
            if (editorPage && !document.getElementById('editorHistoryList')) {
                const historyHTML = `
                    <div class="feature-card mt-4">
                        <div class="history-header">
                            <h5 class="mb-0"><i class="fas fa-history me-2"></i>Riwayat Editing</h5>
                            <button class="btn btn-sm btn-outline-primary" onclick="clearHistory('editor')">
                                <i class="fas fa-trash"></i> Hapus
                            </button>
                        </div>
                        <div id="editorHistoryList" style="max-height: 300px; overflow-y: auto;">
                            <div class="empty-history">
                                <i class="fas fa-clock fa-2x mb-3"></i>
                                <p>Belum ada riwayat editing</p>
                            </div>
                        </div>
                    </div>
                `;
                editorPage.insertAdjacentHTML('beforeend', historyHTML);
            }

            // Paraphrase Page History
            const paraphrasePage = document.getElementById('paraphrasePage');
            if (paraphrasePage && !document.getElementById('paraphraseHistoryList')) {
                const historyHTML = `
                    <div class="feature-card mt-4">
                        <div class="history-header">
                            <h5 class="mb-0"><i class="fas fa-history me-2"></i>Riwayat Parafrase</h5>
                            <button class="btn btn-sm btn-outline-success" onclick="clearHistory('paraphrase')">
                                <i class="fas fa-trash"></i> Hapus
                            </button>
                        </div>
                        <div id="paraphraseHistoryList" style="max-height: 300px; overflow-y: auto;">
                            <div class="empty-history">
                                <i class="fas fa-clock fa-2x mb-3"></i>
                                <p>Belum ada riwayat parafrase</p>
                            </div>
                        </div>
                    </div>
                `;
                paraphrasePage.insertAdjacentHTML('beforeend', historyHTML);
            }

            // Plagiarism Page History
            const plagiarismPage = document.getElementById('plagiarismPage');
            if (plagiarismPage && !document.getElementById('plagiarismHistoryList')) {
                const historyHTML = `
                    <div class="feature-card mt-4">
                        <div class="history-header">
                            <h5 class="mb-0"><i class="fas fa-history me-2"></i>Riwayat Cek Plagiarisme</h5>
                            <button class="btn btn-sm btn-outline-warning" onclick="clearHistory('plagiarism')">
                                <i class="fas fa-trash"></i> Hapus
                            </button>
                        </div>
                        <div id="plagiarismHistoryList" style="max-height: 300px; overflow-y: auto;">
                            <div class="empty-history">
                                <i class="fas fa-clock fa-2x mb-3"></i>
                                <p>Belum ada riwayat cek plagiarisme</p>
                            </div>
                        </div>
                    </div>
                `;
                plagiarismPage.insertAdjacentHTML('beforeend', historyHTML);
            }

            // Summarizer Page History
            const summarizerPage = document.getElementById('summarizerPage');
            if (summarizerPage && !document.getElementById('summarizerHistoryList')) {
                const historyHTML = `
                    <div class="feature-card mt-4">
                        <div class="history-header">
                            <h5 class="mb-0"><i class="fas fa-history me-2"></i>Riwayat Summarizer</h5>
                            <button class="btn btn-sm btn-outline-info" onclick="clearHistory('summarizer')">
                                <i class="fas fa-trash"></i> Hapus
                            </button>
                        </div>
                        <div id="summarizerHistoryList" style="max-height: 300px; overflow-y: auto;">
                            <div class="empty-history">
                                <i class="fas fa-clock fa-2x mb-3"></i>
                                <p>Belum ada riwayat summarizer</p>
                            </div>
                        </div>
                    </div>
                `;
                summarizerPage.insertAdjacentHTML('beforeend', historyHTML);
            }

            // Generator Ide Page History
            const generatoridePage = document.getElementById('generatoridePage');
            if (generatoridePage && !document.getElementById('ideaHistoryList')) {
                const historyHTML = `
                    <div class="feature-card mt-4">
                        <div class="history-header">
                            <h5 class="mb-0"><i class="fas fa-history me-2"></i>Riwayat Generator Ide</h5>
                            <button class="btn btn-sm btn-outline-dark" onclick="clearHistory('idea')">
                                <i class="fas fa-trash"></i> Hapus
                            </button>
                        </div>
                        <div id="ideaHistoryList" style="max-height: 300px; overflow-y: auto;">
                            <div class="empty-history">
                                <i class="fas fa-clock fa-2x mb-3"></i>
                                <p>Belum ada riwayat generator ide</p>
                            </div>
                        </div>
                    </div>
                `;
                generatoridePage.insertAdjacentHTML('beforeend', historyHTML);
            }

            // Notes Page History
            const notesPage = document.getElementById('notesPage');
            if (notesPage && !document.getElementById('notesHistoryList')) {
                const historyHTML = `
                    <div class="feature-card mt-4">
                        <div class="history-header">
                            <h5 class="mb-0"><i class="fas fa-history me-2"></i>Riwayat Catatan</h5>
                            <button class="btn btn-sm btn-outline-secondary" onclick="clearHistory('note')">
                                <i class="fas fa-trash"></i> Hapus
                            </button>
                        </div>
                        <div id="notesHistoryList" style="max-height: 300px; overflow-y: auto;">
                            <div class="empty-history">
                                <i class="fas fa-clock fa-2x mb-3"></i>
                                <p>Belum ada riwayat catatan</p>
                            </div>
                        </div>
                    </div>
                `;
                notesPage.insertAdjacentHTML('beforeend', historyHTML);
            }

            // Setup event listeners for filter buttons
            setTimeout(() => {
                setupHistoryFilters();
            }, 100);
        }

        // ==================== HISTORY MANAGEMENT FUNCTIONS ====================
        function setupHistoryFilters() {
            document.querySelectorAll('.history-filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.history-filter-btn').forEach(b => {
                        b.classList.remove('active', 'btn-primary');
                        b.classList.add('btn-outline-primary');
                    });
                    
                    this.classList.add('active', 'btn-primary');
                    this.classList.remove('btn-outline-primary');
                    
                    const filter = this.getAttribute('data-filter');
                    filterDashboardHistory(filter);
                });
            });
        }

        function filterDashboardHistory(filter) {
            if (!historySystem) return;
            
            const container = document.getElementById('dashboardHistoryList');
            const items = historySystem.getHistoryByType(filter);
            
            if (!items || items.length === 0) {
                container.innerHTML = `
                    <div class="empty-history">
                        <i class="fas fa-clock fa-2x mb-3"></i>
                        <p>Belum ada riwayat ${filter}</p>
                    </div>
                `;
                return;
            }
            
            historySystem.renderHistoryList(container, items.slice(0, 10));
        }

        window.loadHistoryItem = function(id) {
            if (!historySystem) return;
            
            const item = historySystem.getHistoryItem(id);
            if (!item) {
                showToast('Riwayat tidak ditemukan!', 'warning');
                return;
            }

            switch(item.type) {
                case 'editor':
                    document.getElementById('editorInput').value = item.content;
                    navigateTo('editor');
                    showToast('Teks editor berhasil dimuat ulang!');
                    break;
                    
                case 'paraphrase':
                    document.getElementById('paraphraseInput').value = item.content;
                    navigateTo('paraphrase');
                    showToast('Teks parafrase berhasil dimuat ulang!');
                    break;
                    
                case 'plagiarism':
                    document.getElementById('plagiarismInput').value = item.content;
                    navigateTo('plagiarism');
                    showToast('Teks cek plagiarisme berhasil dimuat ulang!');
                    break;
                    
                case 'summarizer':
                    document.getElementById('summarizerInput').value = item.content;
                    navigateTo('summarizer');
                    showToast('Teks summarizer berhasil dimuat ulang!');
                    break;
                    
                case 'idea':
                    showToast('Untuk memuat ulang ide, gunakan fitur Generator Ide', 'info');
                    navigateTo('generatoride');
                    break;
                    
                case 'note':
                    showToast('Catatan dapat dilihat di halaman Catatan Saya', 'info');
                    navigateTo('notes');
                    break;
            }
        };

        window.deleteHistoryItem = function(id) {
            if (!historySystem || !confirm('Hapus item riwayat ini?')) return;
            
            historySystem.history = historySystem.history.filter(item => item.id !== id);
            historySystem.save();
            historySystem.updateAllHistoryDisplays();
            
            showToast('Riwayat berhasil dihapus!');
        };

        window.clearHistory = function(type) {
            if (!historySystem || !confirm(`Hapus semua riwayat ${type}?`)) return;
            
            historySystem.clearHistoryByType(type);
            showToast(`Riwayat ${type} berhasil dihapus!`);
        };

        window.clearAllHistory = function() {
            if (!historySystem || !confirm('Hapus semua riwayat?')) return;
            
            historySystem.clearHistoryByType('all');
            showToast('Semua riwayat berhasil dihapus!');
        };

        // ==================== INITIALIZATION ====================
        window.addEventListener('DOMContentLoaded', () => {
            showPage('landingPage');
            
            if (auth.isLoggedIn()) {
                const user = JSON.parse(localStorage.getItem('serene_current_user'));
                auth.currentUser = user;
                appData = new AppData(user.id);
                historySystem = new HistorySystem(user.id);
                createHistoryContainers();
                historySystem.updateAllHistoryDisplays();
            }
            
            animateOnScroll();
        });

        // ==================== LANDING PAGE FUNCTIONALITY ====================
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                if (targetId.startsWith('#') && document.getElementById(targetId.substring(1))) {
                    const targetElement = document.getElementById(targetId.substring(1));
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 70,
                            behavior: 'smooth'
                        });
                    }
                }
            });
        });

        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.landing-navbar');
            if (window.scrollY > 50) {
                navbar.style.padding = '0.5rem 0';
                navbar.style.backgroundColor = 'rgba(100, 181, 246, 0.9)';
            } else {
                navbar.style.padding = '1rem 0';
                navbar.style.backgroundColor = 'rgba(100, 181, 246, 0.85)';
            }
        });

        document.getElementById('goToLoginBtn').addEventListener('click', function(e) {
            e.preventDefault();
            showPage('loginPage');
        });

        document.getElementById('startFreeBtn').addEventListener('click', function(e) {
            e.preventDefault();
            showPage('registerPage');
        });

        document.getElementById('getStartedBtn').addEventListener('click', function(e) {
            e.preventDefault();
            showPage('registerPage');
        });

        document.getElementById('learnMoreBtn').addEventListener('click', function(e) {
            e.preventDefault();
            const featuresSection = document.getElementById('features');
            if (featuresSection) {
                window.scrollTo({
                    top: featuresSection.offsetTop - 70,
                    behavior: 'smooth'
                });
            }
        });

        document.getElementById('backToLanding').addEventListener('click', function(e) {
            e.preventDefault();
            showPage('landingPage');
        });

        document.getElementById('backToLandingFromRegister').addEventListener('click', function(e) {
            e.preventDefault();
            showPage('landingPage');
        });

        document.getElementById('backToLandingFromForgot').addEventListener('click', function(e) {
            e.preventDefault();
            showPage('landingPage');
        });

        document.getElementById('backToLandingFromApp').addEventListener('click', function(e) {
            e.preventDefault();
            showPage('landingPage');
        });

        // ==================== AUTH EVENT LISTENERS ====================
        document.getElementById('showRegister').addEventListener('click', (e) => {
            e.preventDefault();
            showPage('registerPage');
        });

        document.getElementById('showLogin').addEventListener('click', (e) => {
            e.preventDefault();
            showPage('loginPage');
        });

        document.getElementById('showForgotPassword').addEventListener('click', (e) => {
            e.preventDefault();
            showPage('forgotPasswordPage');
        });

        document.getElementById('backToLogin').addEventListener('click', (e) => {
            e.preventDefault();
            showPage('loginPage');
        });

        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const remember = document.getElementById('rememberMe').checked;
            
            if (email === 'demo@example.com' && password === 'demo123') {
                const demoUser = {
                    id: 999,
                    name: 'Demo User',
                    email: 'demo@example.com',
                    createdAt: new Date().toISOString(),
                    stats: { paraphrase: 0, summaries: 0, notes: 0, ideas: 0 }
                };
                auth.currentUser = demoUser;
                appData = new AppData(demoUser.id);
                showMainApp();
                showToast('Login demo berhasil! Selamat mencoba Serene Writes.');
                return;
            }
            
            const result = auth.login(email, password, remember);
            if (result.success) {
                appData = new AppData(result.user.id);
                showMainApp();
                showToast('Login berhasil!');
            } else {
                showToast(result.message, 'danger');
            }
        });

        document.getElementById('registerForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            if (password !== confirmPassword) {
                showToast('Password tidak cocok!', 'danger');
                return;
            }
            
            const result = auth.register(name, email, password);
            if (result.success) {
                showToast(result.message);
                showPage('loginPage');
            } else {
                showToast(result.message, 'danger');
            }
        });

        document.getElementById('forgotPasswordForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('forgotEmail').value;
            const result = auth.resetPassword(email);
            showToast(result.message, result.success ? 'success' : 'danger');
            if (result.success) {
                setTimeout(() => showPage('loginPage'), 2000);
            }
        });

        document.getElementById('logoutBtn').addEventListener('click', () => {
            auth.logout();
            showPage('landingPage');
            showToast('Logout berhasil!');
        });

        // ==================== MAIN APP FUNCTIONALITY ====================
        function showMainApp() {
            showPage('mainApp');
            document.getElementById('userNameDisplay').textContent = auth.currentUser.name;
            updateDashboard();
            loadNotes();
            loadGeneratorIdeHistory();
            
            historySystem = new HistorySystem(auth.currentUser.id);
            createHistoryContainers();
            historySystem.updateAllHistoryDisplays();
        }

        function navigateTo(page) {
            document.querySelectorAll('.sidebar .nav-link').forEach(l => l.classList.remove('active'));
            const pageLink = document.querySelector(`[data-page="${page}"]`);
            if (pageLink) {
                pageLink.classList.add('active');
            }
            
            document.querySelectorAll('.page-content').forEach(p => p.classList.add('hidden'));
            document.getElementById(page + 'Page').classList.remove('hidden');
            
            if (historySystem) {
                setTimeout(() => {
                    switch(page) {
                        case 'editor':
                            historySystem.updateEditorHistory();
                            break;
                        case 'paraphrase':
                            historySystem.updateParaphraseHistory();
                            break;
                        case 'plagiarism':
                            historySystem.updatePlagiarismHistory();
                            break;
                        case 'summarizer':
                            historySystem.updateSummarizerHistory();
                            break;
                        case 'generatoride':
                            historySystem.updateIdeaHistory();
                            break;
                        case 'notes':
                            historySystem.updateNotesHistory();
                            break;
                        case 'dashboard':
                            historySystem.updateDashboardHistory();
                            break;
                    }
                }, 100);
            }
        }

        // ==================== PROFILE MANAGEMENT ====================
        document.getElementById('editProfileBtn').addEventListener('click', () => {
            document.getElementById('editName').value = auth.currentUser.name;
            document.getElementById('editEmail').value = auth.currentUser.email;
            document.getElementById('editPassword').value = '';
            new bootstrap.Modal(document.getElementById('editProfileModal')).show();
        });

        document.getElementById('editProfileForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('editName').value;
            const email = document.getElementById('editEmail').value;
            const password = document.getElementById('editPassword').value;
            
            const result = auth.updateProfile(name, email, password);
            if (result.success) {
                showToast(result.message);
                document.getElementById('userNameDisplay').textContent = name;
                bootstrap.Modal.getInstance(document.getElementById('editProfileModal')).hide();
            } else {
                showToast(result.message, 'danger');
            }
        });

        // ==================== NAVIGATION ====================
        document.querySelectorAll('.sidebar .nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                document.querySelectorAll('.sidebar .nav-link').forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                const page = link.getAttribute('data-page');
                navigateTo(page);
            });
        });

        // ==================== DASHBOARD ====================
        function updateDashboard() {
            const notes = appData.getNotes();
            const stats = auth.getStats();
            const totalWords = notes.reduce((sum, note) => sum + (note.content.match(/\b\w+\b/g) || []).length, 0);
            
            document.getElementById('totalNotes').textContent = notes.length;
            document.getElementById('totalWords').textContent = totalWords.toLocaleString();
            document.getElementById('totalParaphrase').textContent = (stats.paraphrase || 0).toLocaleString();
            document.getElementById('totalSummaries').textContent = (stats.summaries || 0).toLocaleString();
            
            const dashboardContent = document.getElementById('dashboardContent');
            if (dashboardContent) {
                dashboardContent.innerHTML = `
                    <h4>Selamat Datang, ${auth.currentUser.name}! </h4>
                    <p class="text-muted">Aplikasi AI untuk membantu Anda menulis lebih cepat, rapi, dan bebas plagiarisme.</p>
                    
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <h5><i class="fas fa-chart-line me-2"></i>Statistik Anda</h5>
                            <div class="table-responsive">
                                <table class="table">
                                    <tbody>
                                        <tr><td>Total Catatan</td><td><strong>${notes.length}</strong></td></tr>
                                        <tr><td>Total Kata</td><td><strong>${totalWords.toLocaleString()}</strong></td></tr>
                                        <tr><td>Parafrase Dilakukan</td><td><strong>${stats.paraphrase || 0}</strong></td></tr>
                                        <tr><td>Ringkasan Dibuat</td><td><strong>${stats.summaries || 0}</strong></td></tr>
                                        <tr><td>Ide Dihasilkan</td><td><strong>${stats.ideas || 0}</strong></td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-bolt me-2"></i>Fitur Cepat</h5>
                            <div class="list-group">
                                <button class="list-group-item list-group-item-action" onclick="navigateTo('editor')">
                                    <i class="fas fa-magic me-2"></i>Editor AI
                                </button>
                                <button class="list-group-item list-group-item-action" onclick="navigateTo('paraphrase')">
                                    <i class="fas fa-sync-alt me-2"></i>Parafrase
                                </button>
                                <button class="list-group-item list-group-item-action" onclick="navigateTo('summarizer')">
                                    <i class="fas fa-compress-alt me-2"></i>Summarizer
                                </button>
                                <button class="list-group-item list-group-item-action" onclick="navigateTo('generatoride')">
                                    <i class="fas fa-lightbulb me-2"></i>Generator Ide
                                </button>
                                <button class="list-group-item list-group-item-action" onclick="navigateTo('notes')">
                                    <i class="fas fa-sticky-note me-2"></i>Catatan Saya
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <h5><i class="fas fa-lightbulb me-2"></i>Tips Produktif</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="alert alert-light">
                                    <h6><i class="fas fa-magic me-2"></i>Editor AI</h6>
                                    <p class="mb-0">Gunakan Editor AI untuk memperbaiki ejaan, kapitalisasi, dan tanda baca secara otomatis.</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="alert alert-light">
                                    <h6><i class="fas fa-lightbulb me-2"></i>Generator Ide</h6>
                                    <p class="mb-0">Hasilkan ide tulisan akademik dari teks dengan fitur Generator Ide.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        // ==================== EDITOR AI ====================
        document.getElementById('autoEditBtn').addEventListener('click', () => {
            const input = document.getElementById('editorInput').value;
            if (!input.trim()) {
                showToast('Masukkan teks terlebih dahulu!', 'warning');
                return;
            }
            
            let edited = input;
            edited = edited.toLowerCase().replace(/^\w|\.\s*\w/g, char => char.toUpperCase());
            edited = edited.replace(/\s+/g, ' ').trim();
            
            if (!/[.!?]$/.test(edited.trim())) {
                edited = edited.trim() + '.';
            }
            
            edited = edited.replace(/\s*([.,!?;:])\s*/g, '$1 ');
            
            const corrections = {
                'klo': 'kalau', 'yg': 'yang', 'tdk': 'tidak', 'bg': 'bagi',
                'gk': 'tidak', 'dpt': 'dapat', 'tp': 'tapi', 'sbg': 'sebagai',
                'jgn': 'jangan', 'sdh': 'sudah', 'blm': 'belum', 'pd': 'pada',
                'dg': 'dengan', 'utk': 'untuk', 'krn': 'karena', 'tsb': 'tersebut'
            };
            
            Object.keys(corrections).forEach(wrong => {
                const regex = new RegExp(`\\b${wrong}\\b`, 'gi');
                edited = edited.replace(regex, corrections[wrong]);
            });
            
            document.getElementById('editorResult').innerHTML = `
                <div class="alert alert-success">
                    <h5><i class="fas fa-check-circle me-2"></i>Hasil Editing AI</h5>
                    <textarea class="form-control" rows="8" id="editedText">${edited}</textarea>
                    <div class="mt-2">
                        <button class="btn btn-sm btn-primary me-2" onclick="copyToClipboard('editedText')">
                            <i class="fas fa-copy"></i> Salin Teks
                        </button>
                        <button class="btn btn-sm btn-success" onclick="useEditedText()">
                            <i class="fas fa-paste"></i> Gunakan di Editor
                        </button>
                    </div>
                    <p class="mt-2 mb-0 text-muted small">
                        <i class="fas fa-info-circle me-1"></i>
                        Teks telah diperbaiki: Kapitalisasi, tanda baca, dan ejaan.
                    </p>
                </div>
            `;
            
            if (historySystem) {
                historySystem.addHistoryItem('editor', input, edited, {
                    action: 'auto_edit',
                    changes: 'kapitalisasi, ejaan, tanda baca'
                });
            }
            
            showToast('Editing AI selesai!');
        });

        document.getElementById('saveEditorBtn').addEventListener('click', () => {
            const content = document.getElementById('editorInput').value;
            if (!content.trim()) {
                showToast('Tidak ada konten untuk disimpan!', 'warning');
                return;
            }
            appData.addNote('Editor ' + new Date().toLocaleString(), content);
            auth.incrementStat('notes');
            showToast('Berhasil disimpan ke catatan!');
            updateDashboard();
            loadNotes();
        });

        document.getElementById('clearEditorBtn').addEventListener('click', () => {
            document.getElementById('editorInput').value = '';
            document.getElementById('editorResult').innerHTML = '';
            showToast('Editor berhasil dibersihkan!');
        });

        // ==================== PARAPHRASE ====================
        document.getElementById('paraphraseBtn').addEventListener('click', () => {
            const input = document.getElementById('paraphraseInput').value;
            if (!input.trim()) {
                showToast('Masukkan teks terlebih dahulu!', 'warning');
                return;
            }
            
            const synonymDictionary = {
                'mengatakan': ['menyatakan', 'mengungkapkan', 'berkata', 'mengucapkan'],
                'membuat': ['menciptakan', 'menghasilkan', 'memproduksi', 'membentuk'],
                'melihat': ['memandang', 'mengamati', 'menyaksikan', 'memperhatikan'],
                'besar': ['luas', 'agung', 'jumbo', 'raksasa'],
                'kecil': ['mungil', 'mini', 'kerdil', 'sempit'],
                'penting': ['utama', 'signifikan', 'krusial', 'vital', 'esensial'],
                'cepat': ['gesit', 'tangkas', 'segera', 'lekas'],
                'mahasiswa': ['pelajar', 'siswa perguruan tinggi', 'anak kuliahan'],
                'tugas': ['pekerjaan', 'kewajiban', 'tugas kuliah', 'pekerjaan rumah'],
                'belajar': ['mempelajari', 'menelaah', 'mengkaji', 'mendalami'],
                'menulis': ['mengarang', 'menyusun', 'menggoreskan', 'merangkai kata']
            };
            
            let paraphrased = input;
            Object.keys(synonymDictionary).forEach(word => {
                const regex = new RegExp(`\\b${word}\\b`, 'gi');
                if (regex.test(paraphrased)) {
                    const synonyms = synonymDictionary[word];
                    const randomSynonym = synonyms[Math.floor(Math.random() * synonyms.length)];
                    paraphrased = paraphrased.replace(regex, randomSynonym);
                }
            });
            
            const sentences = paraphrased.split(/[.!?]+/).filter(s => s.trim());
            paraphrased = sentences.map(sentence => {
                const words = sentence.trim().split(' ');
                if (words.length > 4) {
                    const firstWord = words.shift();
                    words.push(firstWord);
                    return words.join(' ');
                }
                return sentence.trim();
            }).join('. ') + '.';
            
            const uniqueness = 75 + Math.floor(Math.random() * 20);
            
            document.getElementById('paraphraseResult').innerHTML = `
                <div class="alert alert-info">
                    <h5><i class="fas fa-sync-alt me-2"></i>Hasil Parafrase</h5>
                    <textarea class="form-control" rows="8" id="paraphrasedText">${paraphrased}</textarea>
                    <div class="mt-2">
                        <button class="btn btn-sm btn-primary me-2" onclick="copyToClipboard('paraphrasedText')">
                            <i class="fas fa-copy"></i> Salin Teks
                        </button>
                        <span class="badge bg-success">Keunikan: ${uniqueness}%</span>
                    </div>
                    <p class="mt-2 mb-0 text-muted small">
                        <i class="fas fa-info-circle me-1"></i>
                        Teknik: Penggantian sinonim + restrukturisasi kalimat
                    </p>
                </div>
            `;
            
            if (historySystem) {
                historySystem.addHistoryItem('paraphrase', input, paraphrased, {
                    uniqueness: uniqueness,
                    technique: 'penggantian_sinonim_restrukturisasi'
                });
            }
            
            auth.incrementStat('paraphrase');
            updateDashboard();
            showToast(`Parafrase selesai! Tingkat keunikan: ${uniqueness}%`);
        });

        // ==================== PLAGIARISM CHECK ====================
        document.getElementById('checkPlagiarismBtn').addEventListener('click', () => {
            const input = document.getElementById('plagiarismInput').value;
            if (!input.trim()) {
                showToast('Masukkan teks terlebih dahulu!', 'warning');
                return;
            }
            
            const wordCount = input.split(/\s+/).length;
            let plagiarismScore;
            
            if (wordCount < 50) {
                plagiarismScore = Math.floor(Math.random() * 20);
            } else if (wordCount < 200) {
                plagiarismScore = Math.floor(Math.random() * 30);
            } else {
                plagiarismScore = Math.floor(Math.random() * 40);
            }
            
            plagiarismScore = Math.min(40, plagiarismScore);
            
            const status = plagiarismScore < 15 ? 'success' : plagiarismScore < 25 ? 'warning' : 'danger';
            const statusText = plagiarismScore < 15 ? 'Aman ' : plagiarismScore < 25 ? 'Perlu Revisi ' : 'Tinggi ';
            
            document.getElementById('plagiarismResult').innerHTML = `
                <div class="alert alert-${status}">
                    <h5><i class="fas fa-shield-alt me-2"></i>Hasil Cek Plagiarisme</h5>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-1">
                            <span>Tingkat Plagiarisme</span>
                            <span>${plagiarismScore}%</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar bg-${status}" style="width: ${plagiarismScore}%"></div>
                        </div>
                    </div>
                    <p><strong>Status:</strong> ${statusText}</p>
                    <p><strong>Analisis Teks:</strong> ${wordCount} kata, ${input.length} karakter</p>
                    <div class="mt-3">
                        <h6>Saran Perbaikan:</h6>
                        <ul class="mb-0">
                            ${plagiarismScore < 15 ? 
                                '<li>Teks Anda aman dari plagiarisme</li>' : 
                                '<li>Gunakan fitur parafrase untuk mengurangi kesamaan</li>' +
                                '<li>Tambahkan referensi dan kutipan yang sesuai</li>' +
                                '<li>Ubah struktur kalimat dan paragraf</li>' +
                                '<li>Tambahkan ide dan pendapat pribadi</li>'
                            }
                        </ul>
                    </div>
                    <p class="mt-2 mb-0 text-muted small">
                        <i class="fas fa-info-circle me-1"></i>
                        Skor di bawah 15% dianggap aman dari plagiarisme
                    </p>
                </div>
            `;
            
            if (historySystem) {
                historySystem.addHistoryItem('plagiarism', input, `${plagiarismScore}% plagiarisme - ${statusText}`, {
                    score: plagiarismScore,
                    status: statusText,
                    wordCount: wordCount
                });
            }
            
            showToast('Cek plagiarisme selesai!');
        });

        // ==================== SUMMARIZER ====================
        document.getElementById('summarizeBtn').addEventListener('click', () => {
            const input = document.getElementById('summarizerInput').value;
            if (!input.trim()) {
                showToast('Masukkan teks terlebih dahulu!', 'warning');
                return;
            }
            
            const sentences = input.split(/[.!?]+/).filter(s => s.trim().length > 0);
            if (sentences.length <= 3) {
                showToast('Teks terlalu pendek untuk dirangkum!', 'warning');
                return;
            }
            
            const wordFrequency = {};
            const words = input.toLowerCase().match(/\b\w+\b/g) || [];
            words.forEach(word => {
                wordFrequency[word] = (wordFrequency[word] || 0) + 1;
            });
            
            const sentenceScores = sentences.map(sentence => {
                const sentenceWords = sentence.toLowerCase().match(/\b\w+\b/g) || [];
                let score = 0;
                
                sentenceWords.forEach(word => {
                    if (word.length > 3 && wordFrequency[word]) {
                        const importance = 1 / wordFrequency[word];
                        score += importance;
                    }
                });
                
                const importantKeywords = ['kesimpulan', 'penting', 'utama', 'ringkasan', 'akhirnya', 'oleh karena itu'];
                importantKeywords.forEach(keyword => {
                    if (sentence.toLowerCase().includes(keyword)) {
                        score += 2;
                    }
                });
                
                score += sentenceWords.length * 0.1;
                
                return { 
                    sentence: sentence.trim(), 
                    score: score / (sentenceWords.length || 1),
                    wordCount: sentenceWords.length
                };
            });
            
            sentenceScores.sort((a, b) => b.score - a.score);
            
            const summaryCount = Math.max(2, Math.ceil(sentences.length * 0.3));
            const maxSummarySentences = Math.min(summaryCount, 5);
            
            const summarySentences = sentenceScores
                .slice(0, maxSummarySentences)
                .map(s => s.sentence)
                .sort((a, b) => sentences.indexOf(a) - sentences.indexOf(b));
            
            const summary = summarySentences.join('. ') + '.';
            const reduction = Math.round((1 - (summarySentences.length / sentences.length)) * 100);
            
            document.getElementById('summarizerResult').innerHTML = `
                <div class="alert alert-primary">
                    <h5><i class="fas fa-compress-alt me-2"></i>Ringkasan Otomatis</h5>
                    <div class="mb-3">
                        <p class="mb-2"><strong>Statistik:</strong></p>
                        <div class="row">
                            <div class="col-md-6">
                                <span class="badge bg-info me-2">${sentences.length}  ${summarySentences.length} kalimat</span>
                                <span class="badge bg-success">Menghemat ${reduction}%</span>
                            </div>
                            <div class="col-md-6 text-end">
                                <small class="text-muted">${words.length} kata total</small>
                            </div>
                        </div>
                    </div>
                    <textarea class="form-control" rows="8" id="summaryText">${summary}</textarea>
                    <div class="mt-2">
                        <button class="btn btn-sm btn-primary me-2" onclick="copyToClipboard('summaryText')">
                            <i class="fas fa-copy"></i> Salin Ringkasan
                        </button>
                        <button class="btn btn-sm btn-success" onclick="useTextInEditor('summaryText')">
                            <i class="fas fa-paste"></i> Gunakan di Editor
                        </button>
                    </div>
                    <div class="mt-3">
                        <h6><i class="fas fa-lightbulb me-2"></i>Tips Ringkasan Efektif:</h6>
                        <ul class="mb-0 small">
                            <li>Ringkasan mempertahankan ide utama</li>
                            <li>Kalimat penting diprioritaskan</li>
                            <li>Struktur teks asli dipertahankan</li>
                            <li>Cocok untuk review cepat materi</li>
                        </ul>
                    </div>
                    <p class="mt-2 mb-0 text-muted small">
                        <i class="fas fa-info-circle me-1"></i>
                        Algoritma: TF-IDF sederhana untuk mengidentifikasi kalimat penting
                    </p>
                </div>
            `;
            
            if (historySystem) {
                historySystem.addHistoryItem('summarizer', input, summary, {
                    reduction: reduction,
                    originalSentences: sentences.length,
                    summarySentences: summarySentences.length,
                    algorithm: 'tf-idf_simplified'
                });
            }
            
            auth.incrementStat('summaries');
            updateDashboard();
            showToast(`Ringkasan berhasil! Dikurangi ${reduction}% dari teks asli.`);
        });

        // ==================== GENERATOR IDE FUNCTIONALITY ====================
        let currentGeneratorIdeIdea = {
            keywords: [],
            summary: '',
            generatedIdeas: [],
            title: '',
            strength: 0,
            focusFeedback: '',
            outline: '',
            originalText: ''
        };

        document.getElementById('generatorideProcessText').addEventListener('click', function() {
            const text = document.getElementById('generatorideTextInput').value.trim();
            
            if (text === '') {
                showToast('Masukkan teks terlebih dahulu.', 'warning');
                return;
            }
            
            currentGeneratorIdeIdea = processGeneratorIdeText(text);
            
            displayGeneratorIdeKeywords(currentGeneratorIdeIdea.keywords);
            displayGeneratorIdeSummary(currentGeneratorIdeIdea.summary);
            displayGeneratorIdeGeneratedIdeas(currentGeneratorIdeIdea.generatedIdeas);
            updateGeneratorIdeTitle();
            updateGeneratorIdeStrengthMeter(currentGeneratorIdeIdea.strength);
            displayGeneratorIdeOutline(currentGeneratorIdeIdea.outline);
            
            if (historySystem) {
                const keywordsList = currentGeneratorIdeIdea.keywords.map(k => k.word);
                historySystem.addHistoryItem('idea', text, currentGeneratorIdeIdea.summary, {
                    strength: currentGeneratorIdeIdea.strength,
                    keywords: keywordsList,
                    ideasCount: currentGeneratorIdeIdea.generatedIdeas.length,
                    focusFeedback: currentGeneratorIdeIdea.focusFeedback
                });
            }
            
            showToast('Teks berhasil diproses!', 'success');
        });

        document.getElementById('generatorideClearText').addEventListener('click', function() {
            document.getElementById('generatorideTextInput').value = '';
            resetGeneratorIdeResults();
        });

        function processGeneratorIdeText(text) {
            const keywords = extractGeneratorIdeKeywords(text);
            const summary = generateGeneratorIdeSummary(text);
            const generatedIdeas = generateGeneratorIdeIdeas(keywords);
            const strength = calculateGeneratorIdeIdeaStrength(keywords, summary, generatedIdeas);
            const outline = generateGeneratorIdeOutline(keywords, generatedIdeas);
            
            return {
                keywords,
                summary,
                generatedIdeas,
                title: '',
                strength,
                focusFeedback: checkGeneratorIdeKeywordFocus(keywords),
                outline,
                originalText: text,
                date: new Date().toISOString()
            };
        }
        
        function extractGeneratorIdeKeywords(text) {
            const cleanText = text.toLowerCase().replace(/[^\w\s]/g, '');
            const words = cleanText.split(/\s+/);
            
            const stopwords = ['dan', 'atau', 'tetapi', 'dengan', 'di', 'ke', 'dari', 'pada', 'yang', 'untuk', 'dalam', 'itu', 'ini', 'saya', 'kamu', 'kami', 'kita', 'mereka', 'adalah', 'sudah', 'akan', 'telah', 'bisa', 'dapat', 'oleh', 'karena', 'sebagai', 'juga', 'saja', 'hanya', 'satu', 'dua', 'tiga', 'lebih', 'sangat', 'ada', 'tidak', 'bukan', 'jika', 'agar', 'supaya', 'ketika', 'saat', 'sebelum', 'setelah', 'agar', 'sehingga', 'meskipun', 'walaupun', 'namun', 'oleh', 'karena'];
            
            const wordCount = {};
            words.forEach(word => {
                if (word.length > 3 && !stopwords.includes(word)) {
                    wordCount[word] = (wordCount[word] || 0) + 1;
                }
            });
            
            const sortedWords = Object.keys(wordCount).sort((a, b) => wordCount[b] - wordCount[a]);
            const topWords = sortedWords.slice(0, Math.min(10, sortedWords.length));
            
            return topWords.map(word => ({
                word,
                frequency: wordCount[word],
                importance: wordCount[word] > 3 ? 'high' : wordCount[word] > 1 ? 'medium' : 'low'
            }));
        }
        
        function generateGeneratorIdeSummary(text) {
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
            
            if (sentences.length <= 2) {
                return text;
            }
            
            const firstSentence = sentences[0].trim();
            let lastSentence = sentences[sentences.length - 1].trim();
            
            if (lastSentence.split(' ').length < 5 && sentences.length > 2) {
                lastSentence = sentences[sentences.length - 2].trim();
            }
            
            return `${firstSentence}. ${lastSentence}.`;
        }
        
        function generateGeneratorIdeIdeas(keywords) {
            if (keywords.length === 0) return [];
            
            const ideas = [];
            const topics = [
                "pengaruh", "dampak", "peran", "strategi", "analisis", 
                "implementasi", "efektivitas", "hubungan", "faktor", "solusi"
            ];
            const contexts = [
                "terhadap perilaku mahasiswa", 
                "dalam dunia pendidikan", 
                "pada era digital", 
                "di lingkungan akademik", 
                "bagi perkembangan ilmu pengetahuan"
            ];
            
            for (let i = 0; i < Math.min(3, keywords.length); i++) {
                const keyword = keywords[i].word;
                const topic = topics[i % topics.length];
                const context = contexts[i % contexts.length];
                
                ideas.push(`${topic} ${keyword} ${context}`);
            }
            
            return ideas;
        }
        
        function calculateGeneratorIdeIdeaStrength(keywords, summary, generatedIdeas) {
            let score = 0;
            
            if (keywords.length >= 5) score += 30;
            else if (keywords.length >= 3) score += 20;
            else if (keywords.length >= 1) score += 10;
            
            const summarySentences = summary.split(/[.!?]+/).filter(s => s.trim().length > 0);
            if (summarySentences.length >= 2 && summarySentences.length <= 3) score += 30;
            else if (summarySentences.length === 1) score += 15;
            
            if (generatedIdeas.length >= 3) score += 40;
            else if (generatedIdeas.length >= 2) score += 25;
            else if (generatedIdeas.length >= 1) score += 10;
            
            return Math.min(score, 100);
        }
        
        function checkGeneratorIdeKeywordFocus(keywords) {
            if (keywords.length === 0) {
                return "Tidak ada kata kunci yang ditemukan. Coba masukkan teks yang lebih panjang dan spesifik.";
            }
            
            const highImportanceCount = keywords.filter(k => k.importance === 'high').length;
            
            if (keywords.length > 7) {
                return "Kata kunci terlalu banyak. Ide mungkin terlalu luas. Coba fokus pada 3-5 kata kunci utama.";
            } else if (highImportanceCount >= 3) {
                return "Kata kunci memiliki fokus yang baik dengan beberapa kata penting yang muncul berulang.";
            } else if (keywords.length < 3) {
                return "Kata kunci terlalu sedikit. Ide mungkin terlalu sempit. Coba masukkan teks yang lebih panjang.";
            } else {
                return "Kata kunci memiliki fokus yang cukup baik untuk dikembangkan menjadi tulisan.";
            }
        }
        
        function generateGeneratorIdeOutline(keywords, generatedIdeas) {
            if (generatedIdeas.length === 0) return "";
            
            const outlineSections = [
                "Pendahuluan",
                "Latar Belakang",
                "Pembahasan",
                "Analisis/Solusi",
                "Kesimpulan"
            ];
            
            let outline = `<div class="row">`;
            
            outlineSections.forEach((section, index) => {
                outline += `
                <div class="col-md-4 mb-3">
                    <div class="card border-0 bg-light">
                        <div class="card-body">
                            <h6 class="card-subtitle mb-2 text-primary">${section}</h6>
                            <ul class="small">
                `;
                
                if (section === "Pendahuluan") {
                    outline += `<li>Pengantar topik utama</li>`;
                    outline += `<li>Rumusan masalah</li>`;
                    outline += `<li>Tujuan penulisan</li>`;
                } else if (section === "Latar Belakang") {
                    outline += `<li>Kontekstualisasi masalah</li>`;
                    outline += `<li>Data pendukung</li>`;
                    outline += `<li>Relevansi dengan kata kunci utama</li>`;
                } else if (section === "Pembahasan") {
                    keywords.slice(0, 3).forEach(keyword => {
                        outline += `<li>Pembahasan tentang "${keyword.word}"</li>`;
                    });
                } else if (section === "Analisis/Solusi") {
                    generatedIdeas.slice(0, 2).forEach((idea, i) => {
                        outline += `<li>${i+1}. ${idea}</li>`;
                    });
                } else if (section === "Kesimpulan") {
                    outline += `<li>Rangkuman temuan utama</li>`;
                    outline += `<li>Implikasi hasil analisis</li>`;
                    outline += `<li>Saran untuk penelitian lanjutan</li>`;
                }
                
                outline += `
                            </ul>
                        </div>
                    </div>
                </div>
                `;
                
                if ((index + 1) % 3 === 0 && index !== outlineSections.length - 1) {
                    outline += `</div><div class="row">`;
                }
            });
            
            outline += `</div>`;
            return outline;
        }

        function displayGeneratorIdeKeywords(keywords) {
            const container = document.getElementById('generatorideKeywordsContainer');
            if (keywords.length === 0) {
                container.innerHTML = '<p class="text-muted">Tidak ada kata kunci yang ditemukan.</p>';
                return;
            }
            
            let html = '<div class="d-flex flex-wrap gap-2">';
            keywords.forEach(keyword => {
                const importanceClass = keyword.importance === 'high' ? 'bg-primary text-white' : 
                                      keyword.importance === 'medium' ? 'bg-info text-dark' : 'bg-light text-dark';
                html += `
                <span class="badge ${importanceClass} p-2">
                    ${keyword.word} 
                    <small class="ms-1">(${keyword.frequency})</small>
                </span>
                `;
            });
            html += '</div>';
            container.innerHTML = html;
        }
        
        function displayGeneratorIdeSummary(summary) {
            document.getElementById('generatorideSummaryContainer').innerHTML = `<p class="mb-0">${summary}</p>`;
        }
        
        function displayGeneratorIdeGeneratedIdeas(generatedIdeas) {
            const container = document.getElementById('generatorideIdeaContainer');
            if (generatedIdeas.length === 0) {
                container.innerHTML = '<p class="text-muted">Tidak ada ide yang dihasilkan.</p>';
                return;
            }
            
            let html = '<ul class="list-group list-group-flush">';
            generatedIdeas.forEach((idea, index) => {
                html += `
                <li class="list-group-item border-0 px-0">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="generatoride-idea-selection" id="generatoride-idea-${index}" ${index === 0 ? 'checked' : ''}>
                        <label class="form-check-label" for="generatoride-idea-${index}">
                            ${idea}
                        </label>
                    </div>
                </li>
                `;
            });
            html += '</ul>';
            container.innerHTML = html;
        }
        
        function updateGeneratorIdeTitle() {
            const direction = document.querySelector('input[name="generatoride-idea-direction"]:checked').id;
            const selectedIdea = document.querySelector('input[name="generatoride-idea-selection"]:checked');
            
            if (!selectedIdea) return;
            
            const ideaText = selectedIdea.nextElementSibling.textContent.trim();
            let title = '';
            
            switch(direction) {
                case 'generatoride-descriptive':
                    title = `Deskripsi Lengkap: ${ideaText}`;
                    break;
                case 'generatoride-analytical':
                    title = `Analisis Mendalam: ${ideaText}`;
                    break;
                case 'generatoride-solution':
                    title = `Solusi Inovatif: ${ideaText}`;
                    break;
            }
            
            currentGeneratorIdeIdea.title = title;
            document.getElementById('generatorideTitleContainer').innerHTML = `<h5 class="text-primary">${title}</h5>`;
        }
        
        function updateGeneratorIdeStrengthMeter(strength) {
            const strengthFill = document.getElementById('generatorideStrengthFill');
            const strengthText = document.getElementById('generatorideStrengthText');
            const strengthScore = document.getElementById('generatorideStrengthScore');
            const strengthFeedback = document.getElementById('generatorideStrengthFeedback');
            
            strengthFill.style.width = `${strength}%`;
            
            if (strength < 40) {
                strengthFill.className = 'strength-fill bg-danger';
                strengthText.textContent = 'Lemah';
            } else if (strength < 70) {
                strengthFill.className = 'strength-fill bg-warning';
                strengthText.textContent = 'Cukup';
            } else {
                strengthFill.className = 'strength-fill bg-success';
                strengthText.textContent = 'Kuat';
            }
            
            strengthScore.textContent = `${strength}/100`;
            
            let feedback = '';
            if (strength < 40) {
                feedback = 'Ide membutuhkan pengembangan lebih lanjut. Coba tambahkan lebih banyak konten atau fokus pada kata kunci yang lebih spesifik.';
            } else if (strength < 70) {
                feedback = 'Ide cukup baik untuk dikembangkan. Pertimbangkan untuk menambahkan lebih banyak detail atau contoh spesifik.';
            } else {
                feedback = 'Ide kuat dan siap dikembangkan menjadi tulisan lengkap. Kata kunci dan ringkasan sudah fokus.';
            }
            
            strengthFeedback.innerHTML = `<p class="small mb-0">${feedback}</p>`;
        }
        
        function displayGeneratorIdeOutline(outline) {
            document.getElementById('generatorideOutlineContainer').innerHTML = outline;
        }
        
        function resetGeneratorIdeResults() {
            document.getElementById('generatorideKeywordsContainer').innerHTML = '<p class="text-muted small">Kata kunci akan muncul di sini setelah teks diproses</p>';
            document.getElementById('generatorideSummaryContainer').innerHTML = '<p class="text-muted small">Ringkasan akan muncul di sini setelah teks diproses</p>';
            document.getElementById('generatorideIdeaContainer').innerHTML = '<p class="text-muted small">Ide akan muncul di sini setelah teks diproses</p>';
            document.getElementById('generatorideTitleContainer').innerHTML = '<p class="text-muted small">Judul akan muncul di sini</p>';
            document.getElementById('generatorideStrengthFill').style.width = '0%';
            document.getElementById('generatorideStrengthText').textContent = 'Belum diukur';
            document.getElementById('generatorideStrengthScore').textContent = '0/100';
            document.getElementById('generatorideStrengthFeedback').innerHTML = '<p class="text-muted small">Masukkan teks untuk mengevaluasi kekuatan ide</p>';
            document.getElementById('generatorideOutlineContainer').innerHTML = '<p class="text-muted small">Template kerangka akan muncul di sini setelah ide disimpan</p>';
        }

        document.querySelectorAll('input[name="generatoride-idea-direction"]').forEach(radio => {
            radio.addEventListener('change', updateGeneratorIdeTitle);
        });

        document.addEventListener('change', function(e) {
            if (e.target.name === 'generatoride-idea-selection') {
                updateGeneratorIdeTitle();
            }
        });

        document.getElementById('generatorideSaveIdea').addEventListener('click', function() {
            if (!auth.currentUser) {
                showToast('Anda harus login untuk menyimpan ide.', 'warning');
                return;
            }
            
            if (currentGeneratorIdeIdea.keywords.length === 0) {
                showToast('Tidak ada ide untuk disimpan. Proses teks terlebih dahulu.', 'warning');
                return;
            }
            
            const ideaToSave = {
                id: Date.now().toString(),
                userId: auth.currentUser.id,
                title: currentGeneratorIdeIdea.title || 'Ide tanpa judul',
                keywords: currentGeneratorIdeIdea.keywords.map(k => k.word),
                summary: currentGeneratorIdeIdea.summary,
                generatedIdeas: currentGeneratorIdeIdea.generatedIdeas,
                strength: currentGeneratorIdeIdea.strength,
                focusFeedback: currentGeneratorIdeIdea.focusFeedback,
                outline: currentGeneratorIdeIdea.outline,
                originalText: currentGeneratorIdeIdea.originalText,
                date: new Date().toISOString()
            };
            
            appData.addIdea(ideaToSave);
            auth.incrementStat('ideas');
            showToast('Ide berhasil disimpan!');
            loadGeneratorIdeHistory();
            updateDashboard();
        });

        function loadGeneratorIdeHistory() {
            const ideas = appData.getIdeas();
            const userIdeas = ideas.filter(idea => idea.userId === auth.currentUser.id);
            
            const historyContainer = document.getElementById('generatorideHistoryContainer');
            
            if (userIdeas.length === 0) {
                historyContainer.innerHTML = '<p class="text-muted text-center py-4">Belum ada ide yang disimpan. Proses teks untuk menyimpan ide pertama Anda.</p>';
                return;
            }
            
            let html = '';
            userIdeas.reverse().forEach(idea => {
                const date = new Date(idea.date).toLocaleDateString('id-ID', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });
                
                html += `
                <div class="note-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <h6 class="mb-1">${idea.title}</h6>
                        <small class="text-muted">${date}</small>
                    </div>
                    <p class="mb-2 small">${idea.summary.substring(0, 100)}${idea.summary.length > 100 ? '...' : ''}</p>
                    <div class="d-flex flex-wrap gap-1 mb-2">
                        ${idea.keywords.slice(0, 5).map(keyword => 
                            `<span class="badge bg-light text-dark">${keyword}</span>`
                        ).join('')}
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                        <small class="text-muted">Kekuatan: ${idea.strength}/100</small>
                        <div>
                            <button class="btn btn-sm btn-outline-primary me-2" onclick="viewGeneratorIdeIdea(${idea.id})">
                                <i class="fas fa-eye"></i> Lihat
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="deleteGeneratorIdeIdea(${idea.id})">
                                <i class="fas fa-trash"></i> Hapus
                            </button>
                        </div>
                    </div>
                </div>
                `;
            });
            
            historyContainer.innerHTML = html;
        }

        window.viewGeneratorIdeIdea = function(id) {
            const idea = appData.getIdea(id);
            if (!idea) return;
            
            document.getElementById('generatorideTextInput').value = idea.originalText;
            
            currentGeneratorIdeIdea = {
                keywords: idea.keywords.map(word => ({word, frequency: 1, importance: 'medium'})),
                summary: idea.summary,
                generatedIdeas: idea.generatedIdeas,
                title: idea.title,
                strength: idea.strength,
                focusFeedback: idea.focusFeedback,
                outline: idea.outline,
                originalText: idea.originalText
            };
            
            displayGeneratorIdeKeywords(currentGeneratorIdeIdea.keywords);
            displayGeneratorIdeSummary(currentGeneratorIdeIdea.summary);
            displayGeneratorIdeGeneratedIdeas(currentGeneratorIdeIdea.generatedIdeas);
            updateGeneratorIdeTitle();
            updateGeneratorIdeStrengthMeter(currentGeneratorIdeIdea.strength);
            displayGeneratorIdeOutline(currentGeneratorIdeIdea.outline);
            
            navigateTo('generatoride');
            showToast('Ide berhasil dimuat!');
        };

        window.deleteGeneratorIdeIdea = function(id) {
            if (!confirm('Apakah Anda yakin ingin menghapus ide ini?')) return;
            
            appData.deleteIdea(id);
            loadGeneratorIdeHistory();
            updateDashboard();
            showToast('Ide berhasil dihapus!');
        };

        // ==================== NOTES MANAGEMENT ====================
        document.getElementById('addNoteBtn').addEventListener('click', () => {
            document.getElementById('noteTitle').value = '';
            document.getElementById('noteContent').value = '';
            document.querySelector('#addNoteModal .modal-title').textContent = 'Tambah Catatan';
            const form = document.getElementById('addNoteForm');
            if (form.dataset.editId) {
                form.removeAttribute('data-edit-id');
            }
            new bootstrap.Modal(document.getElementById('addNoteModal')).show();
        });

        document.getElementById('addNoteForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const title = document.getElementById('noteTitle').value;
            const content = document.getElementById('noteContent').value;
            
            const form = document.getElementById('addNoteForm');
            if (form.dataset.editId) {
                const id = parseInt(form.dataset.editId);
                appData.updateNote(id, title, content);
                showToast('Catatan berhasil diperbarui!');
                form.removeAttribute('data-edit-id');
                document.querySelector('#addNoteModal .modal-title').textContent = 'Tambah Catatan';
            } else {
                const note = appData.addNote(title, content);
                auth.incrementStat('notes');
                showToast('Catatan berhasil ditambahkan!');
                
                if (historySystem) {
                    historySystem.addHistoryItem('note', title, content.substring(0, 100) + '...', {
                        wordCount: content.split(/\s+/).length,
                        noteId: note.id
                    });
                }
            }
            
            loadNotes();
            updateDashboard();
            bootstrap.Modal.getInstance(document.getElementById('addNoteModal')).hide();
        });

        document.getElementById('addNoteModal').addEventListener('hidden.bs.modal', () => {
            document.getElementById('addNoteForm').reset();
            document.querySelector('#addNoteModal .modal-title').textContent = 'Tambah Catatan';
            const form = document.getElementById('addNoteForm');
            if (form.dataset.editId) {
                form.removeAttribute('data-edit-id');
            }
        });

        function loadNotes() {
            const notes = appData.getNotes();
            const notesList = document.getElementById('notesList');
            
            if (notes.length === 0) {
                notesList.innerHTML = `
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        Belum ada catatan. Klik "Tambah Catatan" untuk membuat yang pertama!
                    </div>
                `;
                return;
            }
            
            notesList.innerHTML = notes.map(note => `
                <div class="note-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <h5 class="mb-1">${note.title}</h5>
                        <small class="text-muted">${new Date(note.updatedAt).toLocaleDateString('id-ID')}</small>
                    </div>
                    <p class="mb-2">${note.content.substring(0, 200)}${note.content.length > 200 ? '...' : ''}</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <small class="text-muted">
                            <i class="fas fa-calendar"></i> ${new Date(note.createdAt).toLocaleString('id-ID')}
                            <span class="ms-2"><i class="fas fa-file-word"></i> ${note.content.split(/\s+/).length} kata</span>
                        </small>
                        <div>
                            <button class="btn btn-sm btn-outline-primary me-2" onclick="editNote(${note.id})">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="deleteNote(${note.id})">
                                <i class="fas fa-trash"></i> Hapus
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        window.editNote = function(id) {
            const notes = appData.getNotes();
            const note = notes.find(n => n.id === id);
            
            if (note) {
                document.getElementById('noteTitle').value = note.title;
                document.getElementById('noteContent').value = note.content;
                document.getElementById('addNoteForm').dataset.editId = id;
                document.querySelector('#addNoteModal .modal-title').textContent = 'Edit Catatan';
                new bootstrap.Modal(document.getElementById('addNoteModal')).show();
            }
        };

        window.deleteNote = function(id) {
            if (confirm('Yakin ingin menghapus catatan ini?')) {
                appData.deleteNote(id);
                loadNotes();
                updateDashboard();
                showToast('Catatan berhasil dihapus!');
            }
        };

        // ==================== UTILITY FUNCTIONS ====================
        window.copyToClipboard = function(elementId) {
            const textarea = document.getElementById(elementId);
            if (textarea) {
                textarea.select();
                document.execCommand('copy');
                showToast('Teks berhasil disalin!');
            }
        };

        window.useTextInEditor = function(elementId) {
            const textarea = document.getElementById(elementId);
            if (textarea) {
                document.getElementById('editorInput').value = textarea.value;
                navigateTo('editor');
                showToast('Teks telah dipindahkan ke Editor AI!');
            }
        };

        window.useEditedText = function() {
            const textarea = document.getElementById('editedText');
            if (textarea) {
                document.getElementById('editorInput').value = textarea.value;
                showToast('Teks telah dipindahkan ke Editor!');
            }
        };

        // ==================== LANDING PAGE ANIMATIONS ====================
        function animateOnScroll() {
            const elements = document.querySelectorAll('.animate-fade-in-up');
            
            elements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                const elementVisible = 150;
                
                if (elementTop < window.innerHeight - elementVisible) {
                    element.classList.add('animate-fade-in-up');
                }
            });
        }
        
        window.addEventListener('scroll', animateOnScroll);
    </script>
</body>
</html>
